# 690. Attaching Data To Actions

> Duração: `4min`

## Recursos
- 06-added-actions.zip

WEBVTT

1
00:00:02.610 --> 00:00:03.630
<v Maximilian>Now before we'll take</v>

2
00:00:03.630 --> 00:00:06.270
a look under the hood of actions

3
00:00:06.270 --> 00:00:09.030
and see what createAction does under the hood

4
00:00:09.030 --> 00:00:11.520
and which alternative code you could write,

5
00:00:11.520 --> 00:00:12.690
I also wanna show you

6
00:00:12.690 --> 00:00:16.140
how you could attach data to your actions,

7
00:00:16.140 --> 00:00:17.580
because it is quite common

8
00:00:17.580 --> 00:00:20.913
that actions should carry some data with them.

9
00:00:21.810 --> 00:00:25.770
For example, in this very simple demo application here,

10
00:00:25.770 --> 00:00:29.610
you might not always want to increase the counter by 1.

11
00:00:29.610 --> 00:00:33.363
Maybe you want to add 2 or 3 or 10 to it.

12
00:00:34.380 --> 00:00:36.030
So therefore, you might want to have

13
00:00:36.030 --> 00:00:39.870
a more dynamic action that can carry data.

14
00:00:39.870 --> 00:00:41.220
And since this is so common,

15
00:00:41.220 --> 00:00:43.770
that, of course, absolutely is a requirement

16
00:00:43.770 --> 00:00:46.980
that is supported by NgRx.

17
00:00:46.980 --> 00:00:50.460
createAction is able to take a second argument,

18
00:00:50.460 --> 00:00:52.320
which in the end would be an object

19
00:00:52.320 --> 00:00:54.780
that describes the kind of data

20
00:00:54.780 --> 00:00:57.960
that can be attached to the action.

21
00:00:57.960 --> 00:01:01.740
And that's done with help of the extra props function

22
00:01:01.740 --> 00:01:05.310
that's provided by ngrx/store.

23
00:01:05.310 --> 00:01:10.080
Here for this second argument that's passed to createAction,

24
00:01:10.080 --> 00:01:13.350
you can execute props as a function.

25
00:01:13.350 --> 00:01:14.670
And now the important thing

26
00:01:14.670 --> 00:01:17.280
is that you add angled brackets here

27
00:01:17.280 --> 00:01:20.580
since props is a generic function to describe

28
00:01:20.580 --> 00:01:23.913
the kind of data that can be attached to the action.

29
00:01:24.900 --> 00:01:27.120
And this typically is an object

30
00:01:27.120 --> 00:01:30.390
where you could add a key named value,

31
00:01:30.390 --> 00:01:33.270
though this key name is totally up to you.

32
00:01:33.270 --> 00:01:35.580
And you then define the kind of data

33
00:01:35.580 --> 00:01:37.620
that can be attached to the action.

34
00:01:37.620 --> 00:01:39.620
For example, here, it would be a number.

35
00:01:40.830 --> 00:01:42.180
But this can be anything.

36
00:01:42.180 --> 00:01:46.200
If this would be an action related to user authentication,

37
00:01:46.200 --> 00:01:49.470
you could instead have an email and a password,

38
00:01:49.470 --> 00:01:51.870
which both are of type string.

39
00:01:51.870 --> 00:01:54.900
So you really just describe the shape of the data

40
00:01:54.900 --> 00:01:57.330
that should be attachable to the action.

41
00:01:57.330 --> 00:02:01.110
In this case, the value of type number

42
00:02:01.110 --> 00:02:04.500
by which the counter should be incremented.

43
00:02:04.500 --> 00:02:07.140
So that's how you prepare an action

44
00:02:07.140 --> 00:02:10.653
when using createAction for data being attached.

45
00:02:11.610 --> 00:02:15.420
To extract this data, you then go to your reducer,

46
00:02:15.420 --> 00:02:17.730
and there in this function that will be triggered

47
00:02:17.730 --> 00:02:21.630
when this action occurs, you can accept a second argument,

48
00:02:21.630 --> 00:02:23.700
an action argument.

49
00:02:23.700 --> 00:02:25.740
And just as the state value,

50
00:02:25.740 --> 00:02:30.740
this action value will be fed in automatically by NgRx

51
00:02:30.750 --> 00:02:34.113
because NgRx is the thing that executes this function.

52
00:02:35.160 --> 00:02:38.400
Now, this action thing, which we're getting here,

53
00:02:38.400 --> 00:02:43.350
turns out to be an object that has a type property,

54
00:02:43.350 --> 00:02:46.830
and that will simply be the identifier of the action,

55
00:02:46.830 --> 00:02:50.280
but it then also has a value property.

56
00:02:50.280 --> 00:02:52.320
And it's value here in my case,

57
00:02:52.320 --> 00:02:55.410
because I named this key here value

58
00:02:55.410 --> 00:02:57.360
when defining the kind of data

59
00:02:57.360 --> 00:02:59.820
that can be attached to an action.

60
00:02:59.820 --> 00:03:01.950
If you chose a different key here,

61
00:03:01.950 --> 00:03:03.690
you have to use a different key here

62
00:03:03.690 --> 00:03:05.553
when extracting that data.

63
00:03:06.420 --> 00:03:10.860
So that's how you can extract data from that action,

64
00:03:10.860 --> 00:03:14.283
how you define the data, and how you then extract it.

65
00:03:15.180 --> 00:03:18.390
And with this in the CounterControlsComponent,

66
00:03:18.390 --> 00:03:20.760
we now would have to pass the data

67
00:03:20.760 --> 00:03:23.250
that should be attached to the action

68
00:03:23.250 --> 00:03:24.870
when calling the action here

69
00:03:24.870 --> 00:03:27.990
as a function inside of dispatch.

70
00:03:27.990 --> 00:03:30.870
In this case here, it should be an object with a value key

71
00:03:30.870 --> 00:03:33.750
that could be 2 to increment the counter by 2,

72
00:03:33.750 --> 00:03:36.150
or 5 to increment it by 5.

73
00:03:36.150 --> 00:03:37.560
Whatever you want.

74
00:03:37.560 --> 00:03:39.213
Here, I'll go with 2.

75
00:03:40.320 --> 00:03:43.053
And with that, if you run ng serve,

76
00:03:44.160 --> 00:03:47.580
you will see that if I reload and I click increment,

77
00:03:47.580 --> 00:03:49.410
the counter now is incremented

78
00:03:49.410 --> 00:03:52.113
by 2 every time I click this button.

79
00:03:53.340 --> 00:03:56.250
And, of course, hopefully unsurprisingly,

80
00:03:56.250 --> 00:03:59.250
this code is exactly the same no matter

81
00:03:59.250 --> 00:04:02.103
how you are building your application.

82
00:04:03.111 --> 00:04:06.130
So I can then also copy over my actions code

83
00:04:07.740 --> 00:04:10.320
into the counter.actions.ts file

84
00:04:10.320 --> 00:04:12.660
and do the same for the reducer.

85
00:04:12.660 --> 00:04:14.670
And the code is exactly the same,

86
00:04:14.670 --> 00:04:17.100
no matter if you're using standalone components

87
00:04:17.100 --> 00:04:18.693
or Angular modules.

