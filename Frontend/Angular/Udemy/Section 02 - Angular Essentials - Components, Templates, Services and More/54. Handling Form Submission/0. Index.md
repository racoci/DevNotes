# 54. Handling Form Submission

> Duração: `3min`

Sem Recursos

WEBVTT

1
00:00:00.660 --> 00:00:01.980
<v Maximilian>So how do we now handle</v>

2
00:00:01.980 --> 00:00:03.720
the submission of this form

3
00:00:03.720 --> 00:00:06.420
so that we can then close the dialogue

4
00:00:06.420 --> 00:00:10.233
and add this data to the tasks array?

5
00:00:11.340 --> 00:00:13.920
Well, the way HTML works

6
00:00:13.920 --> 00:00:18.180
is such that if you have a Submit button in a form,

7
00:00:18.180 --> 00:00:19.920
as it's the case here,

8
00:00:19.920 --> 00:00:24.120
that button when pressed will automatically submit the form

9
00:00:24.120 --> 00:00:27.420
and the browser will then try to send a request

10
00:00:27.420 --> 00:00:32.420
with that form data to the server that served the website.

11
00:00:32.850 --> 00:00:34.890
Now, that's a problem here,

12
00:00:34.890 --> 00:00:37.590
because that would be our development server,

13
00:00:37.590 --> 00:00:42.480
which is not configured to take incoming data requests

14
00:00:42.480 --> 00:00:44.520
that wanna submit data.

15
00:00:44.520 --> 00:00:46.500
We don't support that here.

16
00:00:46.500 --> 00:00:49.260
This server really only exists

17
00:00:49.260 --> 00:00:51.483
to serve the index.html file.

18
00:00:52.830 --> 00:00:56.220
Therefore we wanna prevent that browser default.

19
00:00:56.220 --> 00:00:59.370
We wanna make sure that no such request is sent

20
00:00:59.370 --> 00:01:02.610
so that we can instead handle the submission

21
00:01:02.610 --> 00:01:05.343
in JavaScript on the client side.

22
00:01:06.810 --> 00:01:11.070
And preventing this browser default behavior

23
00:01:11.070 --> 00:01:14.130
of creating and sending that request

24
00:01:14.130 --> 00:01:17.520
is pretty simple when using Angular,

25
00:01:17.520 --> 00:01:20.220
because it will actually automatically

26
00:01:20.220 --> 00:01:22.140
be prevented for you

27
00:01:22.140 --> 00:01:25.890
if you're importing that FormsModule,

28
00:01:25.890 --> 00:01:30.890
which we did add to the imports to unlock ngModel,

29
00:01:31.260 --> 00:01:35.370
because this FormsModule inside of it

30
00:01:35.370 --> 00:01:39.600
includes a component built by the Angular team,

31
00:01:39.600 --> 00:01:41.760
which uses the form element,

32
00:01:41.760 --> 00:01:45.660
the standard form element tag, as a selector,

33
00:01:45.660 --> 00:01:48.960
and which therefore takes control of this form,

34
00:01:48.960 --> 00:01:51.060
under the hood automatically,

35
00:01:51.060 --> 00:01:54.273
simply by importing this FormsModule.

36
00:01:55.290 --> 00:01:57.540
And this form component,

37
00:01:57.540 --> 00:02:00.090
which took control of this form here,

38
00:02:00.090 --> 00:02:04.200
will automatically listen to the submission of the form

39
00:02:04.200 --> 00:02:07.800
and then prevent that browser default

40
00:02:07.800 --> 00:02:10.830
when that submission occurs.

41
00:02:10.830 --> 00:02:14.400
So therefore, you technically don't need to do anything

42
00:02:14.400 --> 00:02:17.550
to prevent that default.

43
00:02:17.550 --> 00:02:19.740
Now of course we want to be notified

44
00:02:19.740 --> 00:02:21.840
when such a submission occurs though,

45
00:02:21.840 --> 00:02:25.380
and we wanna run our own code when it happens.

46
00:02:25.380 --> 00:02:27.960
And therefore this FormsModule,

47
00:02:27.960 --> 00:02:31.080
which took control of this form element

48
00:02:31.080 --> 00:02:35.730
also gives you a special event that will be emitted.

49
00:02:35.730 --> 00:02:38.250
The ngSubmit event

50
00:02:38.250 --> 00:02:41.790
to which you can listen on this form element,

51
00:02:41.790 --> 00:02:45.600
which will occur when that form submission happened

52
00:02:45.600 --> 00:02:49.590
and that browser default was prevented.

53
00:02:49.590 --> 00:02:53.070
And you can then run your own code in response

54
00:02:53.070 --> 00:02:55.200
to this ngSubmit event.

55
00:02:55.200 --> 00:02:56.700
So therefore, by simply

56
00:02:56.700 --> 00:02:59.550
setting up event binding to ngSubmit

57
00:02:59.550 --> 00:03:02.040
and then running any code of your choice,

58
00:03:02.040 --> 00:03:05.640
you will be able to handle this form submission on your own

59
00:03:05.640 --> 00:03:08.130
in your Angular code.

60
00:03:08.130 --> 00:03:09.180
And for that I'll add

61
00:03:09.180 --> 00:03:13.653
a new method here onSubmit, sounds like a fitting name,

62
00:03:14.580 --> 00:03:18.663
and I'll bind this to the ngSubmit event like this.

