# 28. Introducing Signals

> Duração: `13min`

Sem Recursos

WEBVTT

1
00:00:00.270 --> 00:00:03.480
<v Instructor>So we did now take a closer look at State</v>

2
00:00:03.480 --> 00:00:06.570
and how we can change State with Angular

3
00:00:06.570 --> 00:00:08.970
over the last lectures.

4
00:00:08.970 --> 00:00:12.450
Now it is worth noting that this way

5
00:00:12.450 --> 00:00:16.200
of updating the State of the application

6
00:00:16.200 --> 00:00:18.930
and of the user interface, therefore,

7
00:00:18.930 --> 00:00:22.080
is just one way of doing it.

8
00:00:22.080 --> 00:00:24.630
And it is the way that has been around

9
00:00:24.630 --> 00:00:27.180
since the release of Angular 2

10
00:00:27.180 --> 00:00:29.580
because it is pretty straightforward

11
00:00:29.580 --> 00:00:32.070
and easy to use and understand.

12
00:00:32.070 --> 00:00:36.540
It is however, not the only way of changing data

13
00:00:36.540 --> 00:00:38.670
that should have an impact on the UI

14
00:00:38.670 --> 00:00:40.830
because there is a newer,

15
00:00:40.830 --> 00:00:43.530
more recent mechanism available as well,

16
00:00:43.530 --> 00:00:46.470
which I also wanna show you here.

17
00:00:46.470 --> 00:00:50.130
And that mechanism uses a concept called Signals,

18
00:00:50.130 --> 00:00:53.070
which in the end are special kinds of values

19
00:00:53.070 --> 00:00:55.560
that tell Angular when they change.

20
00:00:55.560 --> 00:00:57.330
And I'll show you how to work with them

21
00:00:57.330 --> 00:00:59.190
and I'll also thereafter explain

22
00:00:59.190 --> 00:01:00.930
why you might wanna use them

23
00:01:00.930 --> 00:01:04.413
instead of this other mechanism I showed you before.

24
00:01:05.340 --> 00:01:08.250
You create such a Signal value

25
00:01:08.250 --> 00:01:12.480
by importing the Signal function from Angular core,

26
00:01:12.480 --> 00:01:14.133
so that's the first step.

27
00:01:15.750 --> 00:01:19.770
With that imported, you then create such a Signal value

28
00:01:19.770 --> 00:01:22.190
and store it in a property

29
00:01:22.190 --> 00:01:24.780
of your component class component.

30
00:01:24.780 --> 00:01:26.760
In our case, where I wanna replace

31
00:01:26.760 --> 00:01:30.870
this selected user property value with such a Signal,

32
00:01:30.870 --> 00:01:32.490
I'll simply create it here

33
00:01:32.490 --> 00:01:34.590
on the right side of this equal sign here.

34
00:01:35.520 --> 00:01:38.550
You can then also pass an initial value to the Signal.

35
00:01:38.550 --> 00:01:42.120
And here I'll pass that user object to the Signal.

36
00:01:42.120 --> 00:01:44.370
So that initial user object,

37
00:01:44.370 --> 00:01:47.163
which we get with help of this random index.

38
00:01:49.140 --> 00:01:53.370
Now, the idea behind this Signal thing here

39
00:01:53.370 --> 00:01:57.330
is that it's in the end a container you could say

40
00:01:57.330 --> 00:02:02.310
that contains a value like this initial dummy user here.

41
00:02:02.310 --> 00:02:05.520
And when you then change that value,

42
00:02:05.520 --> 00:02:09.990
Angular will be notified about that change.

43
00:02:09.990 --> 00:02:14.700
And Angular then is able to identify all the places,

44
00:02:14.700 --> 00:02:17.310
for example, in your templates

45
00:02:17.310 --> 00:02:20.100
where that value is being used.

46
00:02:20.100 --> 00:02:23.610
So where that Signal is being used in the end,

47
00:02:23.610 --> 00:02:27.270
and it's then able to update these places.

48
00:02:27.270 --> 00:02:29.130
And I'll show you how to read

49
00:02:29.130 --> 00:02:32.730
and use a Signal in a template in just a second.

50
00:02:32.730 --> 00:02:34.950
But that's the idea behind Signals,

51
00:02:34.950 --> 00:02:38.040
in the end, you are dealing with containers

52
00:02:38.040 --> 00:02:42.030
that contain values and that notify Angular

53
00:02:42.030 --> 00:02:44.370
whenever those values change

54
00:02:44.370 --> 00:02:48.690
so that Angular can then update the parts of the UI

55
00:02:48.690 --> 00:02:50.820
where those values are used,

56
00:02:50.820 --> 00:02:54.570
and that can be a very efficient updating mechanism,

57
00:02:54.570 --> 00:02:57.183
but I'll get back to that in just a second.

58
00:02:58.020 --> 00:03:01.170
So therefore of the idea behind Signals

59
00:03:01.170 --> 00:03:04.710
is that you don't just have some initial values in them,

60
00:03:04.710 --> 00:03:07.770
but that you can also change those values.

61
00:03:07.770 --> 00:03:12.270
And you can, for example, change the value of a Signal

62
00:03:12.270 --> 00:03:16.440
by calling the set method on that Signal object,

63
00:03:16.440 --> 00:03:20.070
so by calling this selected user set.

64
00:03:20.070 --> 00:03:22.710
And by then passing the new value,

65
00:03:22.710 --> 00:03:27.430
in this case, the new dummy user to that set method

66
00:03:28.680 --> 00:03:32.043
like this, and this line here can then be deleted.

67
00:03:33.330 --> 00:03:37.140
So that's how we can initialize and then update a Signal.

68
00:03:37.140 --> 00:03:41.130
We also sometimes need to read it though.

69
00:03:41.130 --> 00:03:43.590
We need to extract a value from it,

70
00:03:43.590 --> 00:03:47.823
for example, here where we compute the image path value.

71
00:03:49.050 --> 00:03:53.220
Now, I'll get back to this computed value in just a second,

72
00:03:53.220 --> 00:03:57.030
and I'll instead start here in the user component template

73
00:03:57.030 --> 00:04:00.453
where we also try to access the Signal value.

74
00:04:01.650 --> 00:04:03.840
Because when you have such a Signal,

75
00:04:03.840 --> 00:04:08.370
you don't access the value stored in the Signal like this,

76
00:04:08.370 --> 00:04:13.080
but instead you have to call the Signal value as a function,

77
00:04:13.080 --> 00:04:15.300
so by adding parentheses

78
00:04:15.300 --> 00:04:18.300
after the property that stores the Signal.

79
00:04:18.300 --> 00:04:21.990
this then executes the Signal's read function,

80
00:04:21.990 --> 00:04:23.310
which gives you the value

81
00:04:23.310 --> 00:04:26.190
that's currently stored in the Signal.

82
00:04:26.190 --> 00:04:27.840
So whenever you are dealing

83
00:04:27.840 --> 00:04:30.330
with a property that stores a Signal,

84
00:04:30.330 --> 00:04:34.410
you have to execute this property as a function

85
00:04:34.410 --> 00:04:37.320
to get the latest value from it.

86
00:04:37.320 --> 00:04:42.090
Now what this read here does is it tells Angular

87
00:04:42.090 --> 00:04:45.480
that you are trying to get the value of that Signal

88
00:04:45.480 --> 00:04:49.650
in this specific place here, so in this template here.

89
00:04:49.650 --> 00:04:53.790
And Angular is therefore able to set up a subscription

90
00:04:53.790 --> 00:04:57.330
behind the scenes, which will make sure that this place

91
00:04:57.330 --> 00:04:59.700
where that Signal value is used,

92
00:04:59.700 --> 00:05:04.440
so this template in this case, will be reevaluated,

93
00:05:04.440 --> 00:05:08.130
rerendered and updated on the UI you could say

94
00:05:08.130 --> 00:05:11.970
whenever that Signal value changes.

95
00:05:11.970 --> 00:05:15.090
So Angular sets up a tracking mechanism

96
00:05:15.090 --> 00:05:18.510
that automatically makes sure that the UI is updated

97
00:05:18.510 --> 00:05:22.350
whenever the underlying value changed.

98
00:05:22.350 --> 00:05:26.580
And that's different from the State management mechanism

99
00:05:26.580 --> 00:05:29.190
we had before without Signals,

100
00:05:29.190 --> 00:05:32.610
because there, when not using Signals,

101
00:05:32.610 --> 00:05:37.610
Angular uses a sub package called Zone.js

102
00:05:37.650 --> 00:05:41.550
to create so-called zones around your components,

103
00:05:41.550 --> 00:05:45.300
which in the end is simply an invisible grouping mechanism

104
00:05:45.300 --> 00:05:47.790
set up behind the scenes by Angular

105
00:05:47.790 --> 00:05:50.760
where it listens for all kinds of events

106
00:05:50.760 --> 00:05:53.610
that could trigger State changes,

107
00:05:53.610 --> 00:05:57.210
so data changes that should affect the UI.

108
00:05:57.210 --> 00:05:59.640
And whenever such a trigger occurs,

109
00:05:59.640 --> 00:06:02.310
because for example, a user clicked a button,

110
00:06:02.310 --> 00:06:04.650
which would be one possible trigger,

111
00:06:04.650 --> 00:06:07.170
whenever that happens, Angular goes ahead

112
00:06:07.170 --> 00:06:10.410
and checks all the Components in that zone

113
00:06:10.410 --> 00:06:13.500
to find out whether some data changed

114
00:06:13.500 --> 00:06:16.110
that now needs to be updated on the UI,

115
00:06:16.110 --> 00:06:20.070
so whether the UI needs to be updated in the end.

116
00:06:20.070 --> 00:06:22.290
That's how Angular performs

117
00:06:22.290 --> 00:06:25.530
that change detection without Signals,

118
00:06:25.530 --> 00:06:28.230
and the advantage of Signals is that Angular

119
00:06:28.230 --> 00:06:33.230
could get rid of Zone.js and this zone concept.

120
00:06:33.840 --> 00:06:37.290
So it allows Angular to perform change detection

121
00:06:37.290 --> 00:06:40.293
and UI updating in a more efficient manner.

122
00:06:41.790 --> 00:06:45.300
That's why this Signal based change detection

123
00:06:45.300 --> 00:06:47.850
and State management was introduced

124
00:06:47.850 --> 00:06:51.780
because this allows Angular to update the UI

125
00:06:51.780 --> 00:06:54.120
in a more fine-grained way

126
00:06:54.120 --> 00:06:56.610
where it doesn't have to check everything

127
00:06:56.610 --> 00:06:58.350
for every possible event

128
00:06:58.350 --> 00:07:01.113
that could occur anywhere in the application.

129
00:07:02.070 --> 00:07:04.350
That's the idea behind Signals

130
00:07:04.350 --> 00:07:06.600
and that's why even though the code

131
00:07:06.600 --> 00:07:10.380
is a bit more verbose than the code we had before,

132
00:07:10.380 --> 00:07:13.230
using Signals is definitely something

133
00:07:13.230 --> 00:07:16.413
you might wanna consider when working with Angular.

134
00:07:17.340 --> 00:07:20.670
Now all that being said, it's also worth noting though

135
00:07:20.670 --> 00:07:23.880
that this Signal feature is rather new.

136
00:07:23.880 --> 00:07:27.870
Signals were introduced with Angular 16

137
00:07:27.870 --> 00:07:32.370
and partially became stable with Angular 17.

138
00:07:32.370 --> 00:07:35.700
And therefore, if you are working on an older code base

139
00:07:35.700 --> 00:07:39.930
or simply with a team that's used to Angular

140
00:07:39.930 --> 00:07:44.550
as it always worked, Signals might not be an option there,

141
00:07:44.550 --> 00:07:46.440
which is why I showed you

142
00:07:46.440 --> 00:07:49.590
that other State management approach first.

143
00:07:49.590 --> 00:07:53.040
But that being said, I'll have a complete section

144
00:07:53.040 --> 00:07:55.680
about Signals later in this course

145
00:07:55.680 --> 00:07:58.470
where we will dive way deeper into Signals

146
00:07:58.470 --> 00:08:01.590
so that you are well prepared to work with Angular

147
00:08:01.590 --> 00:08:03.510
no matter if you are in a project

148
00:08:03.510 --> 00:08:05.460
that is able to use Signals

149
00:08:05.460 --> 00:08:08.580
which do offer advantages as I explained

150
00:08:08.580 --> 00:08:12.360
or if you are working with Angular without Signals.

151
00:08:12.360 --> 00:08:16.770
My goal with this course is to prepare you for both options

152
00:08:16.770 --> 00:08:18.330
and give you the knowledge you need

153
00:08:18.330 --> 00:08:21.360
for both options and approaches.

154
00:08:21.360 --> 00:08:23.280
Now here in this application,

155
00:08:23.280 --> 00:08:24.780
we still got a missing piece though,

156
00:08:24.780 --> 00:08:26.640
and that's this image path.

157
00:08:26.640 --> 00:08:29.160
Previously without Signals,

158
00:08:29.160 --> 00:08:33.900
we could create a computed value with help of such a getter.

159
00:08:33.900 --> 00:08:37.650
Now when using Signals, this is not how you would do it.

160
00:08:37.650 --> 00:08:40.050
Instead, in a world with Signals,

161
00:08:40.050 --> 00:08:42.390
you would set up such a computed value

162
00:08:42.390 --> 00:08:45.390
by simply adding another regular property

163
00:08:45.390 --> 00:08:47.103
called imagePath maybe.

164
00:08:48.060 --> 00:08:52.170
And you would then use the computed function,

165
00:08:52.170 --> 00:08:55.233
which is also imported from at Angular.

166
00:08:56.970 --> 00:08:58.530
And computed is a function

167
00:08:58.530 --> 00:09:01.230
that's meant to be used with Signals

168
00:09:01.230 --> 00:09:05.700
because computed then takes a function as an argument.

169
00:09:05.700 --> 00:09:10.050
So you pass a function to this computed function

170
00:09:10.050 --> 00:09:13.260
and this function which you pass to computed.

171
00:09:13.260 --> 00:09:15.570
And here I'm simply using an arrow function,

172
00:09:15.570 --> 00:09:17.970
but you could be using a regular function as well,

173
00:09:17.970 --> 00:09:21.900
of course, and you also don't have to define it in line

174
00:09:21.900 --> 00:09:23.880
as I'm doing it here,

175
00:09:23.880 --> 00:09:28.200
but this function now should return the computed value,

176
00:09:28.200 --> 00:09:31.170
which may use a Signal.

177
00:09:31.170 --> 00:09:33.720
So in my case here, I wanna return a string,

178
00:09:33.720 --> 00:09:38.720
which is the combination of this fixed string, assets/users,

179
00:09:39.570 --> 00:09:44.160
combined with this selected user being executed

180
00:09:44.160 --> 00:09:47.100
because we wanna read that Signal value.

181
00:09:47.100 --> 00:09:51.540
And in that case, as explained, you always must execute it.

182
00:09:51.540 --> 00:09:54.930
And then I wanna access the avatar property

183
00:09:54.930 --> 00:09:58.680
on that user object that's stored in the Signal,

184
00:09:58.680 --> 00:10:01.110
and that is how you would compute a value

185
00:10:01.110 --> 00:10:02.733
when using Signals.

186
00:10:03.630 --> 00:10:07.200
Now, why would you create a computed value

187
00:10:07.200 --> 00:10:11.460
based on Signals like this with this computed function?

188
00:10:11.460 --> 00:10:15.090
Well, because when using this computed function here,

189
00:10:15.090 --> 00:10:19.440
Angular automatically analyzes whether you are reading

190
00:10:19.440 --> 00:10:22.200
some Signal value inside of that function

191
00:10:22.200 --> 00:10:24.030
you passed to compute it.

192
00:10:24.030 --> 00:10:28.470
And if that's the case, Angular again sets up a subscription

193
00:10:28.470 --> 00:10:31.110
to that Signal that's being used in there,

194
00:10:31.110 --> 00:10:34.050
so to the selected user, Signal in this case.

195
00:10:34.050 --> 00:10:37.170
And whenever that Signal receives a new value

196
00:10:37.170 --> 00:10:40.390
and only then Angular will recompute

197
00:10:41.280 --> 00:10:42.780
the image path here.

198
00:10:42.780 --> 00:10:46.290
So it's a very efficient way of setting up a computed value

199
00:10:46.290 --> 00:10:48.750
because it will not be recomputed

200
00:10:48.750 --> 00:10:52.110
every time anything changes in this component

201
00:10:52.110 --> 00:10:54.180
or the overall application,

202
00:10:54.180 --> 00:10:57.000
but instead, it will only be recomputed

203
00:10:57.000 --> 00:11:00.330
if one of the Signals used inside of it.

204
00:11:00.330 --> 00:11:03.330
So in this case, if this selected user Signal,

205
00:11:03.330 --> 00:11:07.473
which is the only Signal used in there, if that changes.

206
00:11:08.340 --> 00:11:12.060
Now you just also have to make sure that in the template,

207
00:11:12.060 --> 00:11:15.690
you also execute this computed property,

208
00:11:15.690 --> 00:11:18.693
because under the hood it also creates a Signal.

209
00:11:19.560 --> 00:11:22.530
Just a Signal that will automatically update

210
00:11:22.530 --> 00:11:24.990
whenever the Signals it depends on,

211
00:11:24.990 --> 00:11:28.410
in this case, the selectedUser, change.

212
00:11:28.410 --> 00:11:31.533
Angular will make sure that this is tracked automatically.

213
00:11:32.460 --> 00:11:36.090
But since image path therefore also is a Signal,

214
00:11:36.090 --> 00:11:38.460
as you can also see if you hover over it,

215
00:11:38.460 --> 00:11:42.450
you can see the type of the value here, it's a Signal.

216
00:11:42.450 --> 00:11:45.000
Since that's the case, you have to execute it

217
00:11:45.000 --> 00:11:46.650
like a function in your template

218
00:11:46.650 --> 00:11:50.733
because that's always how you read those Signal values.

219
00:11:52.050 --> 00:11:54.960
And with that, if you save everything and you reload,

220
00:11:54.960 --> 00:11:57.810
you should have the same behavior as before.

221
00:11:57.810 --> 00:11:59.220
In this application,

222
00:11:59.220 --> 00:12:03.240
you should have this updating user item here,

223
00:12:03.240 --> 00:12:06.120
but now implemented with help of Signals,

224
00:12:06.120 --> 00:12:09.720
which do offer the advantage I explained before.

225
00:12:09.720 --> 00:12:14.610
Now, because many Angular projects do not use Signals yet,

226
00:12:14.610 --> 00:12:17.910
or might not even be able to use Signals

227
00:12:17.910 --> 00:12:20.910
because they're using an older Angular version,

228
00:12:20.910 --> 00:12:23.610
I will actually not use Signals

229
00:12:23.610 --> 00:12:26.430
everywhere in this demo application,

230
00:12:26.430 --> 00:12:28.620
but instead simply use them here

231
00:12:28.620 --> 00:12:30.450
in the user component for now

232
00:12:30.450 --> 00:12:33.120
so that you see how they could be used.

233
00:12:33.120 --> 00:12:35.970
But I will use that other State management approach,

234
00:12:35.970 --> 00:12:39.150
which I showed you before I introduced Signals

235
00:12:39.150 --> 00:12:42.090
for the rest of this section and application.

236
00:12:42.090 --> 00:12:44.970
As mentioned, there will be an entire section

237
00:12:44.970 --> 00:12:46.530
dedicated to Signals,

238
00:12:46.530 --> 00:12:49.440
where we dive much deeper into Signals

239
00:12:49.440 --> 00:12:51.003
later in the course though.

