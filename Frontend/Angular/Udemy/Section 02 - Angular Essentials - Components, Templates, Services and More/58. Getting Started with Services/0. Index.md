# 58. Getting Started with Services

> Duração: `6min`

Sem Recursos

WEBVTT

1
00:00:00.810 --> 00:00:02.790
<v Maximilian>So, at this point,</v>

2
00:00:02.790 --> 00:00:05.100
the app is basically finished.

3
00:00:05.100 --> 00:00:06.450
It works the way it should,

4
00:00:06.450 --> 00:00:10.653
we can complete our tasks, and we can add new tasks.

5
00:00:11.550 --> 00:00:14.880
But the code base can actually be improved

6
00:00:14.880 --> 00:00:17.130
and should be improved.

7
00:00:17.130 --> 00:00:18.300
Because at the moment,

8
00:00:18.300 --> 00:00:22.290
we're managing all our tasks and all the logic

9
00:00:22.290 --> 00:00:27.290
for manipulating those tasks in the TasksComponent,

10
00:00:27.690 --> 00:00:30.180
which on first sight makes sense, right?

11
00:00:30.180 --> 00:00:31.950
It's the TasksComponent

12
00:00:31.950 --> 00:00:34.713
so it makes sense to manage tasks in there.

13
00:00:35.610 --> 00:00:38.610
But actually when working with Angular,

14
00:00:38.610 --> 00:00:41.040
it's considered a good practice

15
00:00:41.040 --> 00:00:45.360
to keep your Components and their classes

16
00:00:45.360 --> 00:00:47.730
as lean as possible.

17
00:00:47.730 --> 00:00:51.120
And managing some data like these tasks here,

18
00:00:51.120 --> 00:00:55.320
which are actually used by multiple Components,

19
00:00:55.320 --> 00:01:00.320
after all the NewTaskComponent, for example, adds a task

20
00:01:00.600 --> 00:01:04.410
and the Task Component deletes tasks.

21
00:01:04.410 --> 00:01:07.020
If you have situations like this,

22
00:01:07.020 --> 00:01:08.850
it's typically recommended

23
00:01:08.850 --> 00:01:12.753
that you use a service for managing that data.

24
00:01:13.770 --> 00:01:18.510
And services are another crucial feature in Angular

25
00:01:18.510 --> 00:01:21.510
every Angular developer must know about.

26
00:01:21.510 --> 00:01:25.500
That's why we will now build such a service.

27
00:01:25.500 --> 00:01:29.520
So, how do we build a service in Angular?

28
00:01:29.520 --> 00:01:32.910
Well, it typically starts by creating a new file

29
00:01:32.910 --> 00:01:37.290
because just like Components or models,

30
00:01:37.290 --> 00:01:41.010
services should live in their own files.

31
00:01:41.010 --> 00:01:43.410
Now here I plan to create a service

32
00:01:43.410 --> 00:01:44.940
that will manage my tasks,

33
00:01:44.940 --> 00:01:49.940
hence I will create that service in the tasks folder

34
00:01:49.950 --> 00:01:52.253
next to the TasksComponent.

35
00:01:53.250 --> 00:01:56.010
So, it's there where I create an extra file

36
00:01:56.010 --> 00:02:01.010
and I'll name that file tasks.service.ts.

37
00:02:02.310 --> 00:02:05.190
I choose tasks because we'll be managing some tasks

38
00:02:05.190 --> 00:02:08.160
and then the type of the file,

39
00:02:08.160 --> 00:02:10.290
so to say, is service

40
00:02:10.290 --> 00:02:12.543
because we'll store a service in there.

41
00:02:13.860 --> 00:02:16.620
Now, what is a service in Angular?

42
00:02:16.620 --> 00:02:19.350
Well, it's just another class

43
00:02:19.350 --> 00:02:21.427
and I'll name it TasksService.

44
00:02:23.477 --> 00:02:24.810
And at this point,

45
00:02:24.810 --> 00:02:26.910
it hopefully also makes sense

46
00:02:26.910 --> 00:02:30.960
why you should name your Component classes like this,

47
00:02:30.960 --> 00:02:35.640
why you should include the word Component in their names

48
00:02:35.640 --> 00:02:38.370
because these are not the only kinds of classes

49
00:02:38.370 --> 00:02:39.840
you'll be working with.

50
00:02:39.840 --> 00:02:42.630
Instead, a service is also a class,

51
00:02:42.630 --> 00:02:45.900
and hence it's named TasksService here.

52
00:02:45.900 --> 00:02:48.600
Now, the idea behind such a service

53
00:02:48.600 --> 00:02:53.130
then typically is that it performs some operation

54
00:02:53.130 --> 00:02:55.860
and/or manages some data

55
00:02:55.860 --> 00:03:00.300
that might be needed by one or more other Components.

56
00:03:00.300 --> 00:03:03.930
So, in this case, I want this service to manage my tasks,

57
00:03:03.930 --> 00:03:07.410
hence I'll start by cutting this tasks array

58
00:03:07.410 --> 00:03:09.990
from the TasksComponent

59
00:03:09.990 --> 00:03:13.140
and by instead adding it as a property still

60
00:03:13.140 --> 00:03:15.813
to the TasksService like this.

61
00:03:18.360 --> 00:03:22.050
Now, however, I'll make it a private property

62
00:03:22.050 --> 00:03:26.130
by adding this private modifier in front of it,

63
00:03:26.130 --> 00:03:29.100
which is something you can do in TypeScript

64
00:03:29.100 --> 00:03:33.820
so that it can actually only be used inside of this service

65
00:03:34.800 --> 00:03:36.660
because as a next step,

66
00:03:36.660 --> 00:03:40.140
I now want to add a couple of methods

67
00:03:40.140 --> 00:03:43.710
which can then be used from outside the service

68
00:03:43.710 --> 00:03:46.740
to get hold of tasks

69
00:03:46.740 --> 00:03:49.500
or add or delete tasks.

70
00:03:49.500 --> 00:03:52.170
Specifically, here I wanna add a method

71
00:03:52.170 --> 00:03:54.573
called getUserTasks,

72
00:03:56.040 --> 00:04:01.040
which expects to get a userId of type string as an input,

73
00:04:01.230 --> 00:04:04.560
and which should then return all the tasks

74
00:04:04.560 --> 00:04:07.263
that belong to the user with that ID.

75
00:04:08.610 --> 00:04:11.250
And of course, that is some logic we already have

76
00:04:11.250 --> 00:04:12.310
in the TasksComponent

77
00:04:13.200 --> 00:04:17.970
in this selectedUserTasks computed value here.

78
00:04:17.970 --> 00:04:21.120
So, we can simply cut this code here

79
00:04:21.120 --> 00:04:23.673
and bring that over into our service.

80
00:04:25.110 --> 00:04:28.080
Now, this is not this.userId now though,

81
00:04:28.080 --> 00:04:32.460
but just userId, this parameter we're receiving here.

82
00:04:32.460 --> 00:04:36.840
Now, in addition, I also want a method for adding a task.

83
00:04:36.840 --> 00:04:40.470
So, here I add a method called addTask,

84
00:04:40.470 --> 00:04:45.470
which should get the taskData as an input,

85
00:04:45.960 --> 00:04:47.890
and that will be of type NewTaskData

86
00:04:49.650 --> 00:04:54.650
using that type that we did store in that task.model file,

87
00:04:55.440 --> 00:04:58.380
hence this import here must be added.

88
00:04:58.380 --> 00:05:03.000
And then, inside of addTask, we can add this logic,

89
00:05:03.000 --> 00:05:05.250
which we have in the TasksComponent

90
00:05:05.250 --> 00:05:09.000
for adding a new task to this array of tasks

91
00:05:09.000 --> 00:05:12.393
and add this here in addTask in my service.

92
00:05:13.440 --> 00:05:15.930
Now, I also need the userId here

93
00:05:15.930 --> 00:05:17.460
in order to add a task,

94
00:05:17.460 --> 00:05:21.090
so I expect to get this, which is of type string,

95
00:05:21.090 --> 00:05:23.163
as a second parameter here.

96
00:05:24.060 --> 00:05:26.310
Then, I assign that userId

97
00:05:26.310 --> 00:05:30.813
as a value for the userId property in this object.

98
00:05:33.000 --> 00:05:36.720
Of course, we also need a method for deleting a task,

99
00:05:36.720 --> 00:05:39.750
so removeTask could be a fitting name,

100
00:05:39.750 --> 00:05:43.410
and here I expect to get the ID

101
00:05:43.410 --> 00:05:45.450
of the task that should be removed,

102
00:05:45.450 --> 00:05:47.970
which will be of type string.

103
00:05:47.970 --> 00:05:51.690
Again, we have the logic in a TasksComponent already,

104
00:05:51.690 --> 00:05:56.283
there it's this line of code that can be copied.

105
00:05:58.590 --> 00:06:01.770
So, here I will overwrite my tasks

106
00:06:01.770 --> 00:06:05.430
with the new tasks where I removed one task.

107
00:06:05.430 --> 00:06:06.450
And with that,

108
00:06:06.450 --> 00:06:11.450
we outsourced all this task's data management related logic

109
00:06:11.700 --> 00:06:13.893
into this extra class.

