# 73. Creating More Complex Module-based App Structures

> Duração: `7min`

Sem Recursos

WEBVTT

1
00:00:00.750 --> 00:00:02.640
<v Maximilian>And we don't have to stop there.</v>

2
00:00:02.640 --> 00:00:06.960
We cannot also go to the tasks folder here

3
00:00:06.960 --> 00:00:11.960
for practice purposes and add a tasks module.

4
00:00:12.270 --> 00:00:16.560
So a tasks module file and then in that tasks module file,

5
00:00:16.560 --> 00:00:21.243
we export tasks module class,

6
00:00:22.080 --> 00:00:24.963
which is decorated with NG module.

7
00:00:27.060 --> 00:00:30.240
And here we now declare all the components

8
00:00:30.240 --> 00:00:33.180
that make up our tasks feature.

9
00:00:33.180 --> 00:00:35.370
So all the task related Components

10
00:00:35.370 --> 00:00:37.023
that need to work together.

11
00:00:38.520 --> 00:00:40.560
Now for that, I'll go to the app module,

12
00:00:40.560 --> 00:00:43.380
and here it's essentially the tasks component,

13
00:00:43.380 --> 00:00:47.250
the task component, and the new task component

14
00:00:47.250 --> 00:00:51.510
and the card component, which is used by the task component.

15
00:00:51.510 --> 00:00:55.110
Here I'm using the card, so we'll also need to make sure

16
00:00:55.110 --> 00:00:57.903
that that's then available to those Components.

17
00:00:59.190 --> 00:01:01.170
But I'll start by migrating the Components,

18
00:01:01.170 --> 00:01:04.050
hence I'll cut them from here

19
00:01:04.050 --> 00:01:07.590
from the declarations array in the app module.

20
00:01:07.590 --> 00:01:10.570
And we can now remove these unused imports

21
00:01:11.700 --> 00:01:15.813
and instead add them to the tasks module declarations array.

22
00:01:16.920 --> 00:01:19.980
However, we now also need to add their imports,

23
00:01:19.980 --> 00:01:24.183
and I'll let my IDE do that real quick here like this.

24
00:01:25.830 --> 00:01:28.683
And with that, they would be able to work together again.

25
00:01:29.880 --> 00:01:33.840
However, they would neither be available to the app module,

26
00:01:33.840 --> 00:01:36.843
nor would they know about the card component.

27
00:01:38.160 --> 00:01:41.130
Now, I'll start by making them available to the app module

28
00:01:41.130 --> 00:01:43.560
by adding them to my exports.

29
00:01:43.560 --> 00:01:46.350
And here we actually don't have to add all of them.

30
00:01:46.350 --> 00:01:49.380
Instead, we only have to add all the Components

31
00:01:49.380 --> 00:01:52.500
that are being used by other Components defined

32
00:01:52.500 --> 00:01:54.900
in the importing module.

33
00:01:54.900 --> 00:01:57.183
So in the app module in this case.

34
00:01:58.200 --> 00:02:00.870
And if we take a closer look at this module,

35
00:02:00.870 --> 00:02:04.410
we see that the user component does not use

36
00:02:04.410 --> 00:02:09.410
any tasks components neither does the header component

37
00:02:11.940 --> 00:02:16.380
and the app component only in its template

38
00:02:16.380 --> 00:02:18.753
uses the tasks component.

39
00:02:19.980 --> 00:02:22.710
So that's therefore also the only component

40
00:02:22.710 --> 00:02:26.970
that must be made available by the tasks module.

41
00:02:26.970 --> 00:02:30.483
So it's only the tasks component that must be exported.

42
00:02:32.070 --> 00:02:34.770
We still need to declare all components here

43
00:02:34.770 --> 00:02:37.470
because they are working with each other.

44
00:02:37.470 --> 00:02:40.140
The tasks component is after all,

45
00:02:40.140 --> 00:02:44.853
using the new task component and the task component.

46
00:02:45.750 --> 00:02:48.360
So they must all be declared,

47
00:02:48.360 --> 00:02:51.723
but we only need to export the tasks component.

48
00:02:53.040 --> 00:02:57.060
And with that, we can go to the app module again

49
00:02:57.060 --> 00:03:00.510
and now not just register the shared module here,

50
00:03:00.510 --> 00:03:04.143
but also the tasks module.

51
00:03:05.700 --> 00:03:09.930
And that then makes the exported tasks component available

52
00:03:09.930 --> 00:03:11.583
to the app component again.

53
00:03:12.870 --> 00:03:16.950
Nonetheless now, we would actually face a problem here.

54
00:03:16.950 --> 00:03:19.380
You see, for example, the tasks are not showing up,

55
00:03:19.380 --> 00:03:22.950
and I'm getting an error here in my developer tools

56
00:03:22.950 --> 00:03:25.023
that the date pipe could not be found.

57
00:03:26.760 --> 00:03:28.530
And we're getting this problem

58
00:03:28.530 --> 00:03:31.860
because that date pipe is being used

59
00:03:31.860 --> 00:03:36.033
by one of my task related components by the task component.

60
00:03:36.990 --> 00:03:38.400
And it's not just a date pipe,

61
00:03:38.400 --> 00:03:40.143
it's also that card component.

62
00:03:41.010 --> 00:03:44.880
Now you could say both things are made available

63
00:03:44.880 --> 00:03:46.650
by the app module.

64
00:03:46.650 --> 00:03:49.830
The browser module makes the date pipe available

65
00:03:49.830 --> 00:03:52.923
and the shared module makes the card component available.

66
00:03:53.760 --> 00:03:55.590
And that would be true,

67
00:03:55.590 --> 00:03:59.730
but those things are only made available to the module

68
00:03:59.730 --> 00:04:01.593
into which you're importing them.

69
00:04:02.520 --> 00:04:04.740
So the card module is made available

70
00:04:04.740 --> 00:04:08.790
to all these components, and so is the date pipe,

71
00:04:08.790 --> 00:04:11.760
but not to any components that might be defined

72
00:04:11.760 --> 00:04:14.580
by any other imported module.

73
00:04:14.580 --> 00:04:17.340
So the tasks module does not know anything

74
00:04:17.340 --> 00:04:20.343
about the date pipe or the card component.

75
00:04:21.540 --> 00:04:24.810
Now, to fix this, we have to add the imports array

76
00:04:24.810 --> 00:04:28.830
to that task module because as a simple rule,

77
00:04:28.830 --> 00:04:31.830
every module must work on its own.

78
00:04:31.830 --> 00:04:34.080
So if a module needs something,

79
00:04:34.080 --> 00:04:37.470
it must declare or import it itself.

80
00:04:37.470 --> 00:04:40.950
It can't get it from any parent module

81
00:04:40.950 --> 00:04:43.383
that might be using this module.

82
00:04:45.060 --> 00:04:48.570
So if we want to get access to the card component,

83
00:04:48.570 --> 00:04:51.840
we have to import the shared module here

84
00:04:51.840 --> 00:04:54.090
in the tasks module as well,

85
00:04:54.090 --> 00:04:56.373
just as we do it in the app module.

86
00:04:57.810 --> 00:04:59.910
If we want to get access to the date pipe,

87
00:04:59.910 --> 00:05:01.893
we also need to import that.

88
00:05:02.760 --> 00:05:07.170
We could now import it standalone like this.

89
00:05:07.170 --> 00:05:09.990
Instead, what you would do here is

90
00:05:09.990 --> 00:05:14.250
you would import another module provided by Angular.

91
00:05:14.250 --> 00:05:16.830
Now, you could think that it's the browser module

92
00:05:16.830 --> 00:05:19.290
because that is what we imported before,

93
00:05:19.290 --> 00:05:20.430
but that would be wrong

94
00:05:20.430 --> 00:05:23.520
because the browser module is a special module

95
00:05:23.520 --> 00:05:27.450
that's only meant to be imported into the root module

96
00:05:27.450 --> 00:05:31.050
with which you bootstrap the application.

97
00:05:31.050 --> 00:05:33.960
For all other modules that need access

98
00:05:33.960 --> 00:05:37.230
to such common features like the date pipe,

99
00:05:37.230 --> 00:05:40.350
there is another module provided by Angular,

100
00:05:40.350 --> 00:05:43.590
the common module, which is imported

101
00:05:43.590 --> 00:05:47.463
from @Angular common like this.

102
00:05:49.320 --> 00:05:54.320
In addition, we also need to import the forms module here

103
00:05:54.930 --> 00:05:58.440
because the new task component is using features

104
00:05:58.440 --> 00:05:59.880
from that module.

105
00:05:59.880 --> 00:06:02.730
It is using this NG submit event, for example,

106
00:06:02.730 --> 00:06:04.533
and the NG model directive,

107
00:06:05.400 --> 00:06:09.270
which are both provided by this forms module.

108
00:06:09.270 --> 00:06:11.820
So that must be added here to the imports array

109
00:06:11.820 --> 00:06:14.043
of this task module as well.

110
00:06:16.170 --> 00:06:18.750
And with that, we can then actually also go

111
00:06:18.750 --> 00:06:23.220
to the app module and remove the forms module there,

112
00:06:23.220 --> 00:06:24.510
not the browser module

113
00:06:24.510 --> 00:06:26.970
that's still required for this general setup,

114
00:06:26.970 --> 00:06:29.310
but the forms module can be removed

115
00:06:29.310 --> 00:06:32.400
because now no component of those components

116
00:06:32.400 --> 00:06:34.830
is using anything from that module.

117
00:06:34.830 --> 00:06:38.973
So that can be removed and so can be the unused import.

118
00:06:40.350 --> 00:06:44.700
And with that, we're back to the working app we had before,

119
00:06:44.700 --> 00:06:49.020
but now we're also using multiple nested modules

120
00:06:49.020 --> 00:06:51.240
if you want to call them like this.

121
00:06:51.240 --> 00:06:56.130
And whilst splitting this app up into modules like this is

122
00:06:56.130 --> 00:07:00.750
definitely overkill because it was only a basic app,

123
00:07:00.750 --> 00:07:04.440
it does show you how to work with modules,

124
00:07:04.440 --> 00:07:06.450
which is important to know

125
00:07:06.450 --> 00:07:10.320
because you might encounter module based applications

126
00:07:10.320 --> 00:07:13.170
as you are working as an Angular developer

127
00:07:13.170 --> 00:07:16.320
or you might simply prefer modules

128
00:07:16.320 --> 00:07:20.313
over standalone components, which of course also is fine.

