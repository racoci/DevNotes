# 83. Passing Data from Parent to Child with Inputs

> Duração: `10min`

Sem Recursos

WEBVTT

1
00:00:00.330 --> 00:00:03.240
<v Maximilian>Now in order to output this investment data</v>

2
00:00:03.240 --> 00:00:04.073
on the screen,

3
00:00:04.073 --> 00:00:07.110
I want to add a new component that deals

4
00:00:07.110 --> 00:00:09.450
with displaying this table.

5
00:00:09.450 --> 00:00:14.220
So we can generate a new component with the NGC command.

6
00:00:14.220 --> 00:00:15.750
And of course the name is up to you.

7
00:00:15.750 --> 00:00:18.900
Here, I'll name it investment dash results.

8
00:00:18.900 --> 00:00:22.143
And I don't need the testing related files.

9
00:00:23.520 --> 00:00:27.180
With this command executed, we got this component here.

10
00:00:27.180 --> 00:00:30.570
And I'll again start by replacing the style file

11
00:00:30.570 --> 00:00:33.330
with the one you found attached earlier at the beginning

12
00:00:33.330 --> 00:00:37.263
of this section so that we got the proper table stylings.

13
00:00:38.880 --> 00:00:43.173
And as a next step, I wanna start working on that markup.

14
00:00:44.460 --> 00:00:49.020
And here I got actually a couple of requirements.

15
00:00:49.020 --> 00:00:52.260
For one, I want to show some fallback text,

16
00:00:52.260 --> 00:00:55.500
like please enter some values

17
00:00:55.500 --> 00:00:59.610
and press calculate if the user

18
00:00:59.610 --> 00:01:01.890
hasn't done that yet.

19
00:01:01.890 --> 00:01:04.353
So we'll need to show this conditionally.

20
00:01:05.280 --> 00:01:08.790
Otherwise, if the user did press the calculate button,

21
00:01:08.790 --> 00:01:12.423
I wanna output a table with that investment data.

22
00:01:13.530 --> 00:01:16.240
For that, I'll give that table a head

23
00:01:18.660 --> 00:01:23.280
with my different column headings like year,

24
00:01:23.280 --> 00:01:28.280
investment value, interest for the given year,

25
00:01:30.990 --> 00:01:33.003
total interest,

26
00:01:33.960 --> 00:01:36.630
and invested capital.

27
00:01:36.630 --> 00:01:39.843
These are the headings for my columns.

28
00:01:42.150 --> 00:01:45.480
And that of course is the data we are deriving here in

29
00:01:45.480 --> 00:01:46.710
that annual data.

30
00:01:46.710 --> 00:01:49.053
So that's all that data we already got.

31
00:01:50.640 --> 00:01:53.700
But then below the heading, I want to have the table body.

32
00:01:53.700 --> 00:01:57.990
And here I now want to dynamically output as many table rows

33
00:01:57.990 --> 00:02:01.140
as needed because of course, I don't know in advance

34
00:02:01.140 --> 00:02:04.590
for how many years the user wants to calculate that.

35
00:02:04.590 --> 00:02:09.570
Maybe they just wanna calculate for one year, maybe for 100.

36
00:02:09.570 --> 00:02:11.220
I don't know it in advance.

37
00:02:11.220 --> 00:02:15.990
So we need some dynamic code here to output those rows.

38
00:02:15.990 --> 00:02:19.860
Now, before we can add that code though, we must make sure

39
00:02:19.860 --> 00:02:23.553
that we get those results into this component so

40
00:02:23.553 --> 00:02:26.220
that we have them available here.

41
00:02:26.220 --> 00:02:30.270
And we can achieve that by accepting an input,

42
00:02:30.270 --> 00:02:34.770
a bindable property that's exposed by this component

43
00:02:34.770 --> 00:02:36.720
to its parent component so

44
00:02:36.720 --> 00:02:41.700
that the parent component can pass data into this component.

45
00:02:41.700 --> 00:02:44.640
And here for accepting such input data,

46
00:02:44.640 --> 00:02:47.700
we again got two approaches.

47
00:02:47.700 --> 00:02:50.340
Both start by adding a property

48
00:02:50.340 --> 00:02:52.803
that should be settable from outside.

49
00:02:53.880 --> 00:02:56.040
And it could be named results here,

50
00:02:56.040 --> 00:02:57.490
though the name is up to you.

51
00:02:58.800 --> 00:03:03.390
Then you could turn this into an input by assigning a value

52
00:03:03.390 --> 00:03:07.560
where the value is the result of calling the input function

53
00:03:07.560 --> 00:03:11.313
with a lowercase I imported from Angular core.

54
00:03:13.080 --> 00:03:17.310
This registers this as an input to be precise

55
00:03:17.310 --> 00:03:21.153
as a signal input, so using signals.

56
00:03:22.680 --> 00:03:23.970
Now that would be one way.

57
00:03:23.970 --> 00:03:26.130
The other way would be

58
00:03:26.130 --> 00:03:29.370
to not assign a value,

59
00:03:29.370 --> 00:03:32.250
but instead to add a decorator in front of it,

60
00:03:32.250 --> 00:03:36.360
the input decorator with an uppercase eye,

61
00:03:36.360 --> 00:03:39.303
which is also imported from Angular core.

62
00:03:41.850 --> 00:03:46.440
Now, we also need to set the type of data we expect here,

63
00:03:46.440 --> 00:03:48.720
and I'll do that in just a second.

64
00:03:48.720 --> 00:03:52.200
We also would need to do that on the input function though

65
00:03:52.200 --> 00:03:54.603
with help of angle brackets like this.

66
00:03:55.680 --> 00:03:59.190
But what is the type of data we expect to get here?

67
00:03:59.190 --> 00:04:02.430
Well, it's in the end, the shape

68
00:04:02.430 --> 00:04:07.380
of these annual results here, the annual data here.

69
00:04:07.380 --> 00:04:10.170
It will be an array full of objects

70
00:04:10.170 --> 00:04:12.960
where every object has this shape.

71
00:04:12.960 --> 00:04:16.350
So an object that has a year property, interest property,

72
00:04:16.350 --> 00:04:17.763
and so on.

73
00:04:18.960 --> 00:04:22.473
So what I'll do is I'll copy this code here, this object,

74
00:04:23.670 --> 00:04:27.240
and go back to my investment results

75
00:04:27.240 --> 00:04:29.730
and use that here though, of course like this,

76
00:04:29.730 --> 00:04:33.330
it's not a type, I need to replace the part

77
00:04:33.330 --> 00:04:36.210
after the colon here with valid types.

78
00:04:36.210 --> 00:04:39.120
So here, for example, should be a number.

79
00:04:39.120 --> 00:04:41.040
The interest should be a number.

80
00:04:41.040 --> 00:04:43.410
The value at the end of the year should be a number.

81
00:04:43.410 --> 00:04:45.210
The annual investment should be a number.

82
00:04:45.210 --> 00:04:47.010
The total interest should be a number,

83
00:04:47.010 --> 00:04:49.260
and the total amount invested should be a number.

84
00:04:49.260 --> 00:04:50.913
So pretty straightforward.

85
00:04:53.640 --> 00:04:56.610
And that's also the type you would use here

86
00:04:56.610 --> 00:04:59.100
between those angle brackets by the way,

87
00:04:59.100 --> 00:05:02.220
if you were using this input function instead

88
00:05:02.220 --> 00:05:04.293
of this approach here.

89
00:05:05.850 --> 00:05:08.100
Now you'll see that I'll still get an error here

90
00:05:08.100 --> 00:05:12.633
because I have no initial value assigned to results.

91
00:05:14.010 --> 00:05:15.210
So what we can do here

92
00:05:15.210 --> 00:05:19.260
to fix this problem is either add a question mark here

93
00:05:19.260 --> 00:05:21.930
after the property name to tell TypeScript

94
00:05:21.930 --> 00:05:24.030
that this is an optional property,

95
00:05:24.030 --> 00:05:26.490
which might have this value

96
00:05:26.490 --> 00:05:29.040
or a value of this type to be precise,

97
00:05:29.040 --> 00:05:31.323
but which might also be undefined.

98
00:05:32.460 --> 00:05:35.640
Or we add an exclamation mark to tell TypeScript

99
00:05:35.640 --> 00:05:40.410
that this will always be a value of this shape here.

100
00:05:40.410 --> 00:05:43.470
Now here a question mark seems more appropriate

101
00:05:43.470 --> 00:05:47.460
because of course if the user hasn't clicked calculate yet,

102
00:05:47.460 --> 00:05:49.800
we won't have any results yet.

103
00:05:49.800 --> 00:05:51.960
And therefore it makes sense

104
00:05:51.960 --> 00:05:55.800
that this investment results component might be displayed

105
00:05:55.800 --> 00:05:59.310
without any results being available.

106
00:05:59.310 --> 00:06:02.220
So that's how I'll set this up here.

107
00:06:02.220 --> 00:06:04.830
Now with the input added, we can go back

108
00:06:04.830 --> 00:06:09.480
to the app component, to the app component template,

109
00:06:09.480 --> 00:06:14.480
and use our app investment results component here.

110
00:06:14.760 --> 00:06:18.900
Of course, it's not available yet, so we need to import it

111
00:06:18.900 --> 00:06:22.230
and add it to this imports array on the app component.

112
00:06:22.230 --> 00:06:23.670
But with it, it is available.

113
00:06:23.670 --> 00:06:28.670
And with that we can then also bind this results property.

114
00:06:29.730 --> 00:06:34.230
Though it's also fine if we would pass some undefined

115
00:06:34.230 --> 00:06:36.730
value as an initial value here

116
00:06:37.770 --> 00:06:39.840
because thanks to this question mark,

117
00:06:39.840 --> 00:06:42.420
that is a value we anticipate here

118
00:06:42.420 --> 00:06:44.493
in the investment results component.

119
00:06:46.080 --> 00:06:49.140
But either way, at the moment, I got nothing to pass

120
00:06:49.140 --> 00:06:52.170
to the app investment results component

121
00:06:52.170 --> 00:06:54.270
from inside the app component

122
00:06:54.270 --> 00:06:57.330
because in the app component TypeScript file,

123
00:06:57.330 --> 00:06:59.490
I'm calculating the annual data,

124
00:06:59.490 --> 00:07:02.910
but I'm then just logging it to the console,

125
00:07:02.910 --> 00:07:05.850
which is not that helpful.

126
00:07:05.850 --> 00:07:07.620
In order to make it available

127
00:07:07.620 --> 00:07:09.900
to the app component template so

128
00:07:09.900 --> 00:07:12.750
that we can then there use it as a value

129
00:07:12.750 --> 00:07:14.520
for some property binding,

130
00:07:14.520 --> 00:07:19.520
for example, I have to store that annual data in a property

131
00:07:19.530 --> 00:07:20.823
of the app component.

132
00:07:22.230 --> 00:07:25.890
So here I'll add a results data property.

133
00:07:25.890 --> 00:07:28.380
The name of course is up to you.

134
00:07:28.380 --> 00:07:32.640
And this property should actually have the same data shape

135
00:07:32.640 --> 00:07:35.490
as we have in the investment results component

136
00:07:35.490 --> 00:07:36.633
here for the input.

137
00:07:38.070 --> 00:07:40.260
And actually there I have a tiny error

138
00:07:40.260 --> 00:07:42.390
now that I look at it again.

139
00:07:42.390 --> 00:07:44.790
I'm expecting an object of this shape,

140
00:07:44.790 --> 00:07:47.430
but of course this should actually be an array

141
00:07:47.430 --> 00:07:48.540
of such objects.

142
00:07:48.540 --> 00:07:51.030
And the valid TypeScript type definition for

143
00:07:51.030 --> 00:07:55.110
that would be this with those square brackets

144
00:07:55.110 --> 00:07:56.943
after the object type.

145
00:07:57.900 --> 00:08:00.240
This tells TypeScript that the type

146
00:08:00.240 --> 00:08:03.360
of results is actually an array full

147
00:08:03.360 --> 00:08:05.550
of objects that have this shape.

148
00:08:05.550 --> 00:08:08.253
That would be the valid type here.

149
00:08:10.110 --> 00:08:12.900
But that's now also the type I want

150
00:08:12.900 --> 00:08:17.343
to use in my app component for this results data property.

151
00:08:19.290 --> 00:08:23.160
And again, we could outsource this into a separate file,

152
00:08:23.160 --> 00:08:26.010
but here to keep this a bit shorter, I'll not do that.

153
00:08:26.010 --> 00:08:28.263
You could definitely do it though.

154
00:08:29.790 --> 00:08:32.340
But with that, I have this results data property,

155
00:08:32.340 --> 00:08:33.750
which has this shape.

156
00:08:33.750 --> 00:08:35.910
And initially this is undefined.

157
00:08:35.910 --> 00:08:38.850
And to tell TypeScript that this is fine,

158
00:08:38.850 --> 00:08:41.070
I'll also add a question mark here,

159
00:08:41.070 --> 00:08:44.760
which means it may hold data of this shape,

160
00:08:44.760 --> 00:08:46.770
but it may also be undefined

161
00:08:46.770 --> 00:08:49.293
as it initially will be, for example.

162
00:08:51.690 --> 00:08:53.700
And now as a next step,

163
00:08:53.700 --> 00:08:56.340
we can replace this console log statement

164
00:08:56.340 --> 00:08:59.580
with an assignment to results data.

165
00:08:59.580 --> 00:09:02.820
And I wanna store my calculated annual data

166
00:09:02.820 --> 00:09:05.553
in that results data property.

167
00:09:08.130 --> 00:09:09.930
And now with that done,

168
00:09:09.930 --> 00:09:12.780
finally in the app component template,

169
00:09:12.780 --> 00:09:16.890
we can pass this results data property as a value

170
00:09:16.890 --> 00:09:21.753
to the results input property on app investment results.

171
00:09:24.060 --> 00:09:26.760
And that's a common pattern you might see from time

172
00:09:26.760 --> 00:09:30.780
to time in Angular applications that you got one component

173
00:09:30.780 --> 00:09:34.320
that provides some data to the parent component,

174
00:09:34.320 --> 00:09:37.260
to the app component in this case with help

175
00:09:37.260 --> 00:09:41.460
of a custom output, a custom event.

176
00:09:41.460 --> 00:09:45.030
And that the parent component, the app component here,

177
00:09:45.030 --> 00:09:47.910
then does something with that data

178
00:09:47.910 --> 00:09:52.260
and passes it down as an input to some other component.

179
00:09:52.260 --> 00:09:54.603
That is a fairly common pattern.

180
00:09:57.240 --> 00:09:58.380
With that done,

181
00:09:58.380 --> 00:10:00.840
this app investment results component

182
00:10:00.840 --> 00:10:05.070
should receive these results and we can now use them there.

183
00:10:05.070 --> 00:10:07.743
And that's now what I'll do as a next step.

