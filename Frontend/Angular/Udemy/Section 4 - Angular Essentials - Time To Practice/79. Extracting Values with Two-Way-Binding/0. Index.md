# 79. Extracting Values with Two-Way-Binding

> Duração: `8min`

Sem Recursos

WEBVTT

1
00:00:00.510 --> 00:00:02.490
<v Maximilian>So let's set up two-Way binding</v>

2
00:00:02.490 --> 00:00:05.190
for these inputs here.

3
00:00:05.190 --> 00:00:07.440
As you learned earlier in the course,

4
00:00:07.440 --> 00:00:10.980
this can be achieved by in the end, combining the property

5
00:00:10.980 --> 00:00:13.320
and event binding syntax

6
00:00:13.320 --> 00:00:17.970
since two-Way binding is about binding both directions.

7
00:00:17.970 --> 00:00:21.510
We want to be able to send data into the element

8
00:00:21.510 --> 00:00:24.660
that we're binding and we want to be able to get values

9
00:00:24.660 --> 00:00:27.813
out of that element when the values change.

10
00:00:28.860 --> 00:00:31.830
Now, you also learned earlier in the course

11
00:00:31.830 --> 00:00:35.370
that there is no built-in property

12
00:00:35.370 --> 00:00:39.600
you could listen to on the standard browser elements

13
00:00:39.600 --> 00:00:42.030
that would support two-Way binding.

14
00:00:42.030 --> 00:00:45.690
Instead, you have to bring your own elements

15
00:00:45.690 --> 00:00:48.690
and you will learn how to support two-Way binding

16
00:00:48.690 --> 00:00:51.540
on your own properties in your own components

17
00:00:51.540 --> 00:00:53.070
later in the course

18
00:00:53.070 --> 00:00:56.460
but to unlock it for certain built-in elements

19
00:00:56.460 --> 00:00:58.320
like for the input element,

20
00:00:58.320 --> 00:01:01.650
you can use the NG model directive,

21
00:01:01.650 --> 00:01:04.140
which is provided by Angular,

22
00:01:04.140 --> 00:01:09.090
which does support two-way binding on input and text area

23
00:01:09.090 --> 00:01:11.013
and related elements.

24
00:01:11.970 --> 00:01:15.000
Now, this NG model directive is available

25
00:01:15.000 --> 00:01:19.680
if you do import this forms module, which we do

26
00:01:19.680 --> 00:01:21.873
so we don't need to change anything here.

27
00:01:22.920 --> 00:01:25.530
And now we can use that two-way binding syntax,

28
00:01:25.530 --> 00:01:28.500
which is square brackets around parentheses

29
00:01:28.500 --> 00:01:31.203
around the property that you want to bind.

30
00:01:33.090 --> 00:01:37.650
And that NG model thing when used with two-way binding,

31
00:01:37.650 --> 00:01:41.460
we'll now listen to changes of the value of this input

32
00:01:41.460 --> 00:01:44.250
and then update some property of our choice

33
00:01:44.250 --> 00:01:48.450
with that changed value, or if we change that property

34
00:01:48.450 --> 00:01:50.670
from some other place in our code,

35
00:01:50.670 --> 00:01:54.000
it will send that data back into the input.

36
00:01:54.000 --> 00:01:56.073
So we'll have that two-way binding.

37
00:01:57.390 --> 00:02:01.110
That of course also means that we now need a property

38
00:02:01.110 --> 00:02:03.930
to which we can two-way bind

39
00:02:03.930 --> 00:02:07.110
and therefore back in the user component TypeScript file,

40
00:02:07.110 --> 00:02:09.750
I will now add a new property here

41
00:02:09.750 --> 00:02:12.750
inside of the user input component class,

42
00:02:12.750 --> 00:02:17.430
and I'll name it entered initial investment.

43
00:02:17.430 --> 00:02:20.403
Though of course the property name is up to you,

44
00:02:21.990 --> 00:02:25.110
and I'll set this to an initial value of a string

45
00:02:25.110 --> 00:02:27.183
that contains the number zero.

46
00:02:28.080 --> 00:02:30.600
So I'll not set it to the number zero,

47
00:02:30.600 --> 00:02:35.600
but to a string that contains the zero digit, so to say.

48
00:02:35.640 --> 00:02:39.540
And I'm doing this because as I mentioned earlier,

49
00:02:39.540 --> 00:02:42.690
the value you'll get out of an input

50
00:02:42.690 --> 00:02:45.210
will always be a string,

51
00:02:45.210 --> 00:02:46.800
even if the user entered a number,

52
00:02:46.800 --> 00:02:48.240
it will be of type string.

53
00:02:48.240 --> 00:02:51.570
It will be a string that includes the number, so to say.

54
00:02:51.570 --> 00:02:54.630
And that's why I'm also setting my initial value

55
00:02:54.630 --> 00:02:58.200
to such a string that includes a number.

56
00:02:58.200 --> 00:03:00.600
We'll convert it to an actual number,

57
00:03:00.600 --> 00:03:03.723
which we need for our calculations later.

58
00:03:05.010 --> 00:03:07.560
But that's the property to which I wanna bind

59
00:03:07.560 --> 00:03:12.560
and here I am setting up this property to not use signals.

60
00:03:13.500 --> 00:03:15.570
You could also use signals here

61
00:03:15.570 --> 00:03:18.630
and I'll show you how to migrate the application

62
00:03:18.630 --> 00:03:20.310
to signals later.

63
00:03:20.310 --> 00:03:22.320
But for the moment, I'll use this approach

64
00:03:22.320 --> 00:03:24.333
and not use a Signal here.

65
00:03:25.770 --> 00:03:27.000
But with that now added,

66
00:03:27.000 --> 00:03:30.750
we can go back to the user input component, HTML file

67
00:03:30.750 --> 00:03:34.440
and use this entered initial investment property

68
00:03:34.440 --> 00:03:36.960
as a value for the two-way binding here

69
00:03:36.960 --> 00:03:38.883
for this first input.

70
00:03:40.560 --> 00:03:42.990
Now, I'll press this code format shortcut

71
00:03:42.990 --> 00:03:44.850
to make this a bit more readable

72
00:03:44.850 --> 00:03:47.613
and with that, my first input is done.

73
00:03:48.630 --> 00:03:50.580
Now of course, all the inputs

74
00:03:50.580 --> 00:03:53.100
should be two-way bound though,

75
00:03:53.100 --> 00:03:56.490
and therefore I'll repeat that process.

76
00:03:56.490 --> 00:03:58.770
And in the user input component file,

77
00:03:58.770 --> 00:04:03.770
I'll also add an entered annual investment property,

78
00:04:04.620 --> 00:04:08.643
which also contains zero as a starting value.

79
00:04:10.200 --> 00:04:14.130
I'll add an entered expected return property,

80
00:04:14.130 --> 00:04:19.130
which also has zero as a starting value, or maybe five.

81
00:04:19.380 --> 00:04:23.500
Let's use 5% as a default expected return rate

82
00:04:24.840 --> 00:04:28.590
and a entered duration, which maybe has 10

83
00:04:28.590 --> 00:04:32.250
as a starting value though also as a string,

84
00:04:32.250 --> 00:04:36.003
just as the expected return and the other properties.

85
00:04:38.700 --> 00:04:41.580
Now with all these properties added here

86
00:04:41.580 --> 00:04:45.330
back in the user input component HTML file,

87
00:04:45.330 --> 00:04:48.300
we can copy this two-way binding code

88
00:04:48.300 --> 00:04:51.660
and add it on all those inputs.

89
00:04:51.660 --> 00:04:54.240
For example here, the annual investment input,

90
00:04:54.240 --> 00:04:56.730
though of course, I now don't wanna bind

91
00:04:56.730 --> 00:05:00.060
to the entered initial investment property,

92
00:05:00.060 --> 00:05:04.563
but to the entered annual investment property.

93
00:05:06.300 --> 00:05:08.490
And then again, we can copy this

94
00:05:08.490 --> 00:05:10.720
to the expected return input here

95
00:05:13.260 --> 00:05:18.260
and bind this to the entered expected return property

96
00:05:20.760 --> 00:05:23.230
and copy it to the duration input

97
00:05:24.300 --> 00:05:27.843
and bind it to entered duration like this.

98
00:05:31.320 --> 00:05:36.083
With that, I added two way binding to all these inputs

99
00:05:37.110 --> 00:05:40.800
and therefore back in the user input component file,

100
00:05:40.800 --> 00:05:44.130
we can now also console log those values

101
00:05:44.130 --> 00:05:47.943
to confirm that we really captured them.

102
00:05:48.810 --> 00:05:52.263
So I'll output the entered initial investment.

103
00:05:53.460 --> 00:05:57.480
This entered initial investment,

104
00:05:57.480 --> 00:06:01.950
I'll output this entered annual investment,

105
00:06:01.950 --> 00:06:06.300
and of course also the expected return

106
00:06:06.300 --> 00:06:08.403
and the entered duration.

107
00:06:11.400 --> 00:06:16.200
With that done, if you save this and you reload,

108
00:06:16.200 --> 00:06:20.580
you'll be greeted by an error here in the console.

109
00:06:20.580 --> 00:06:24.510
And the error message is that NG model

110
00:06:24.510 --> 00:06:26.430
if used within a foreign tag,

111
00:06:26.430 --> 00:06:28.710
in the end needs the name attribute

112
00:06:28.710 --> 00:06:31.083
on the input element to which you set it.

113
00:06:32.220 --> 00:06:35.610
And that's not the case here in my template.

114
00:06:35.610 --> 00:06:39.930
All these inputs have an ID attribute but no name attribute,

115
00:06:39.930 --> 00:06:44.223
but NG model requires it as this error message tells us.

116
00:06:45.720 --> 00:06:47.880
Well, that's not too difficult to do.

117
00:06:47.880 --> 00:06:50.100
We can of course simply add the name here

118
00:06:50.100 --> 00:06:53.523
and set the name to the same value as the ID.

119
00:06:54.780 --> 00:06:57.480
So I did this here for the initial investment

120
00:06:57.480 --> 00:07:00.990
and all updated for all our inputs as well.

121
00:07:00.990 --> 00:07:04.590
So here, update the annual investment input

122
00:07:04.590 --> 00:07:05.943
to have the right name.

123
00:07:06.990 --> 00:07:10.473
Then also here, the expected return input.

124
00:07:11.670 --> 00:07:16.343
And last but not least, also the duration input.

125
00:07:19.920 --> 00:07:22.980
And with those name attributes added here,

126
00:07:22.980 --> 00:07:25.680
now you see if I reload, the error is gone.

127
00:07:25.680 --> 00:07:29.850
And if I now enter some values here

128
00:07:29.850 --> 00:07:32.520
and maybe keep the defaults for expected return

129
00:07:32.520 --> 00:07:35.460
and duration, if I click calculate,

130
00:07:35.460 --> 00:07:38.013
you see that data was received.

131
00:07:39.480 --> 00:07:42.390
And we also see the two-way binding in action

132
00:07:42.390 --> 00:07:44.730
because our entered values

133
00:07:44.730 --> 00:07:48.840
like the initial investment are captured and output.

134
00:07:48.840 --> 00:07:53.340
But at the same time, these fields here were pre-populated

135
00:07:53.340 --> 00:07:56.910
with the default values five and 10,

136
00:07:56.910 --> 00:07:58.980
which I did set up in my code,

137
00:07:58.980 --> 00:08:02.460
here in the user input component TypeScript file.

138
00:08:02.460 --> 00:08:06.150
So we were able to pass this data here into the inputs

139
00:08:06.150 --> 00:08:08.403
and get the entered data out of them.

