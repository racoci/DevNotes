# 712. Using Keyframes for Animations

> DuraÃ§Ã£o: `6min`

Sem Recursos

WEBVTT

00:01.530 --> 00:03.120
-: Well, that was a lot.

00:03.120 --> 00:06.660
But I wanna mention two more things or show two more things.

00:06.660 --> 00:11.130
One is, a more detailed control over the individual steps

00:11.130 --> 00:14.220
during the animation process here.

00:14.220 --> 00:17.730
We already saw that we can define multiple phases,

00:17.730 --> 00:20.580
but each phase gets the same importance.

00:20.580 --> 00:22.980
It would be nice if you could define some keyframes

00:22.980 --> 00:27.570
to specifically say, "Okay, you animate over one second."

00:27.570 --> 00:30.210
After 200 seconds you should have this state,

00:30.210 --> 00:34.380
after 500 seconds you should have this state and so on.

00:34.380 --> 00:36.210
Well, we can do this.

00:36.210 --> 00:39.180
I'm copying my trigger here a final time.

00:39.180 --> 00:42.060
And here, I want to set up list two,

00:42.060 --> 00:45.810
which in my template I bind to my second list here,

00:45.810 --> 00:47.970
which uses the same data of a source.

00:47.970 --> 00:52.380
So here, @list2 sets up the trigger to bind it,

00:52.380 --> 00:54.930
and then we can set up the animations here.

00:54.930 --> 00:57.780
Well, I'll leave the In state here,

00:57.780 --> 01:01.320
but for the transition, when coming in,

01:01.320 --> 01:02.820
I wanna change this.

01:02.820 --> 01:06.600
Here, I don't want to specify a normal array

01:06.600 --> 01:09.360
as I did before to have these different,

01:09.360 --> 01:11.550
equally weighted phases.

01:11.550 --> 01:16.110
Instead, I'll pass an argument, which is still an array,

01:16.110 --> 01:20.550
but there in the animated function, let's say one second,

01:20.550 --> 01:24.120
I use the keyframes method as the second argument.

01:24.120 --> 01:27.390
This needs to be imported from @angular/core.

01:27.390 --> 01:31.470
Now the keyframes method here in the animate function

01:31.470 --> 01:33.510
allows me to be more precise.

01:33.510 --> 01:36.690
Which part of multiple styles I can now set up,

01:36.690 --> 01:38.970
should occur at which timing?

01:38.970 --> 01:41.130
The overall animation will take one second,

01:41.130 --> 01:45.240
but I can now control, which state inside of that animation

01:45.240 --> 01:47.400
should take how long?

01:47.400 --> 01:50.040
So here, keyframes, therefore is always an array

01:50.040 --> 01:52.200
with now the individual phases.

01:52.200 --> 01:55.080
And there, I simply apply a couple of styles

01:55.080 --> 01:57.000
with the style method again.

01:57.000 --> 02:01.800
So let's say when we let it enter, it should transform.

02:01.800 --> 02:04.800
And at the beginning we have it

02:04.800 --> 02:07.920
on the left as before, minus 100 pixels.

02:07.920 --> 02:11.913
We also set up the opacity as before to zero.

02:12.900 --> 02:16.110
Now let's say, we want to have another style

02:16.110 --> 02:18.300
during that fly in animation.

02:18.300 --> 02:21.660
Here we want to have transform,

02:21.660 --> 02:24.213
set this to translateX,

02:25.650 --> 02:26.793
50 pixels,

02:27.900 --> 02:29.100
minus 50 pixels.

02:29.100 --> 02:30.840
So halfway there,

02:30.840 --> 02:32.730
cause we want to end at zero,

02:32.730 --> 02:34.350
translateX zero at the end,

02:34.350 --> 02:36.390
that is our final state up here,

02:36.390 --> 02:37.223
that.

02:38.490 --> 02:43.160
We wanna animate the opacity to already be at 0.5.

02:45.480 --> 02:48.300
And then we have yet another style, let's say,

02:48.300 --> 02:50.430
where we wanna say, okay,

02:50.430 --> 02:54.690
the transform function is now almost there.

02:54.690 --> 02:59.073
So translateX is now minus 20 pixels.

03:00.480 --> 03:04.260
But importantly, opacity is one.

03:04.260 --> 03:06.720
So we're done when it comes to opacity,

03:06.720 --> 03:10.083
but we're not completely at the position we wanna be.

03:11.010 --> 03:12.330
This will work like that.

03:12.330 --> 03:17.280
I can now save this, and if we let this reload,

03:17.280 --> 03:19.050
you should watch the bottom list.

03:19.050 --> 03:21.450
You already saw it upon the initial fly in,

03:21.450 --> 03:22.283
and you should see it

03:22.283 --> 03:24.423
if you watch the comparison to the top list.

03:25.530 --> 03:28.470
If I add a new item, this is much slower

03:28.470 --> 03:30.752
and it starts fast, and then,

03:30.752 --> 03:31.585
(moans fast)

03:31.585 --> 03:33.720
takes very long for the last bit.

03:33.720 --> 03:37.140
The reason for this is, that by default,

03:37.140 --> 03:39.390
all these steps here take equally long.

03:39.390 --> 03:42.210
I have three elements here in my keyframes array

03:42.210 --> 03:46.470
and then, every style is triggered after a third,

03:46.470 --> 03:48.450
the third of a second.

03:48.450 --> 03:49.800
I can override this.

03:49.800 --> 03:53.767
By passing the offset property, I can say,

03:53.767 --> 03:57.930
"At which timing of these, 1000 milliseconds in this case,

03:57.930 --> 03:59.640
should you be at this state?"

03:59.640 --> 04:03.330
So the first state is at the beginning offset zero.

04:03.330 --> 04:05.340
Then here, let's say, we want to be at this,

04:05.340 --> 04:08.070
not after half of the time,

04:08.070 --> 04:09.450
which it would make sense

04:09.450 --> 04:13.380
because we are halfway in and halfway the opacity.

04:13.380 --> 04:15.280
But we wanna be at this point after

04:17.288 --> 04:20.460
0.3 of our animation time.

04:20.460 --> 04:22.320
So 30% of our animation time,

04:22.320 --> 04:24.780
so 300 milliseconds in this case.

04:24.780 --> 04:28.080
And we wanna be almost done

04:28.080 --> 04:29.407
after, let's say,

04:31.927 --> 04:32.760
0.8.

04:33.660 --> 04:36.520
And then I will add a final style here

04:39.150 --> 04:43.530
with an offset of one, where I'm done.

04:43.530 --> 04:44.910
This is my final keyframe,

04:44.910 --> 04:47.880
so that it doesn't snap at the end.

04:47.880 --> 04:50.670
Well, with this, if I let it reload,

04:50.670 --> 04:52.890
we saw it here upon the initial loading.

04:52.890 --> 04:54.120
And if I add a new item,

04:54.120 --> 04:56.283
it starts fast,

04:58.890 --> 05:00.120
but then,

05:00.120 --> 05:02.430
smoothly finishes.

05:02.430 --> 05:06.390
This is how we use keyframes to control precisely,

05:06.390 --> 05:08.820
which stage we want to have at which time

05:08.820 --> 05:10.230
during the transition.

05:10.230 --> 05:11.070
That's important.

05:11.070 --> 05:14.250
Keyframes are for the time during the transition.

05:14.250 --> 05:17.100
So over the time of such animated function,

05:17.100 --> 05:18.270
and of course you could still have

05:18.270 --> 05:20.730
multiple animate functions as we had before,

05:20.730 --> 05:23.160
in that array, you pass to the transition,

05:23.160 --> 05:25.020
it could have multiple animate functions

05:25.020 --> 05:27.330
and each animate functions could have multiple keyframes.

05:27.330 --> 05:29.853
So, unlimited possibilities here.
