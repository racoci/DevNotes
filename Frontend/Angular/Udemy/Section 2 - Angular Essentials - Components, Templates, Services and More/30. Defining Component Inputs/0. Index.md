# 30. Defining Component Inputs

> Duração: `8min`

Sem Recursos

WEBVTT

1
00:00:00.510 --> 00:00:02.970
<v Maximilian>To accept such inputs,</v>

2
00:00:02.970 --> 00:00:07.620
such settable properties on your components, you have

3
00:00:07.620 --> 00:00:10.620
to go to the component that should accept the input.

4
00:00:10.620 --> 00:00:13.890
And then as a first step, add a property

5
00:00:13.890 --> 00:00:16.800
that should be settable from outside.

6
00:00:16.800 --> 00:00:19.560
For example, here we could say that we want

7
00:00:19.560 --> 00:00:24.560
to accept this avatar here, so this image

8
00:00:25.170 --> 00:00:28.110
of the user as an input.

9
00:00:28.110 --> 00:00:31.320
And we do that by adding a property named avatar,

10
00:00:31.320 --> 00:00:34.830
for example, and by then decorating it

11
00:00:34.830 --> 00:00:37.140
with another decorator.

12
00:00:37.140 --> 00:00:39.840
So decorators like this component decorator

13
00:00:39.840 --> 00:00:42.720
cannot just be added to classes,

14
00:00:42.720 --> 00:00:46.173
but instead also to properties of classes.

15
00:00:47.370 --> 00:00:49.650
And the decorator we need to add here

16
00:00:49.650 --> 00:00:53.040
to this property is the input decorator,

17
00:00:53.040 --> 00:00:56.523
which is also imported from @Angular/core.

18
00:00:57.930 --> 00:01:00.540
It's this input decorator that's added here,

19
00:01:00.540 --> 00:01:03.360
and that's then also executed like a function

20
00:01:03.360 --> 00:01:05.043
by adding parentheses here.

21
00:01:06.690 --> 00:01:09.540
And this will mark this property

22
00:01:09.540 --> 00:01:12.660
as settable from outside.

23
00:01:12.660 --> 00:01:16.293
And I'll fix this error, which I have here in just a second.

24
00:01:17.190 --> 00:01:20.760
But with input added here, we can then go to the place

25
00:01:20.760 --> 00:01:24.150
where we use our component as an element,

26
00:01:24.150 --> 00:01:28.053
and then there set this avatar property.

27
00:01:29.070 --> 00:01:32.460
And we can use property binding here as well to set it

28
00:01:32.460 --> 00:01:34.560
to a dynamic value.

29
00:01:34.560 --> 00:01:37.680
Now that of course, means that here in this case, we have

30
00:01:37.680 --> 00:01:41.070
to make sure that the app component has access

31
00:01:41.070 --> 00:01:42.780
to all the users

32
00:01:42.780 --> 00:01:45.550
so that we can set them here in its template

33
00:01:46.470 --> 00:01:49.260
and therefore in the app component ts file,

34
00:01:49.260 --> 00:01:53.460
we can start by importing the dummy users

35
00:01:53.460 --> 00:01:56.163
from this dummy users file.

36
00:01:57.660 --> 00:02:00.810
And we can then add a property to the app component

37
00:02:00.810 --> 00:02:03.330
so that we can get access to that data

38
00:02:03.330 --> 00:02:06.750
from inside the template of this component.

39
00:02:06.750 --> 00:02:09.690
And that property could be called users,

40
00:02:09.690 --> 00:02:12.993
and we set it equal to dummy users for example.

41
00:02:14.850 --> 00:02:17.940
This is how we can expose this import data

42
00:02:17.940 --> 00:02:20.133
in the template of this component.

43
00:02:21.120 --> 00:02:25.140
Now in the app component HTML file, we could set the avatar

44
00:02:25.140 --> 00:02:29.370
of this first user here to users.

45
00:02:29.370 --> 00:02:32.770
Then we can access the first user with index zero

46
00:02:33.630 --> 00:02:36.660
and access the avatar property.

47
00:02:36.660 --> 00:02:38.580
This is how we could set this.

48
00:02:38.580 --> 00:02:43.050
And of course on the second user element here,

49
00:02:43.050 --> 00:02:46.170
we could then access the second user by using an index

50
00:02:46.170 --> 00:02:47.943
of one like that.

51
00:02:49.710 --> 00:02:52.980
And we will soon learn about a more efficient mechanism

52
00:02:52.980 --> 00:02:57.120
for outputting multiple components based on some array data.

53
00:02:57.120 --> 00:02:59.400
But for now, we can do it manually like this

54
00:02:59.400 --> 00:03:02.163
for the first four users, let's say.

55
00:03:04.470 --> 00:03:06.360
And now we of course still have an error

56
00:03:06.360 --> 00:03:09.660
in the user component TypeScript file though,

57
00:03:09.660 --> 00:03:14.280
the error is that the avatar member, so this property

58
00:03:14.280 --> 00:03:18.480
of this class implicitly has an any type,

59
00:03:18.480 --> 00:03:21.060
and that's now a complaint by TypeScript,

60
00:03:21.060 --> 00:03:23.160
which we have to fix here.

61
00:03:23.160 --> 00:03:26.700
And thus far we didn't have to deal with such complaints

62
00:03:26.700 --> 00:03:31.140
because thus far we only worked with properties

63
00:03:31.140 --> 00:03:36.140
or constants or variables that received an initial value.

64
00:03:36.930 --> 00:03:39.630
But if you have a property like this,

65
00:03:39.630 --> 00:03:42.900
which at the moment doesn't have an initial value

66
00:03:42.900 --> 00:03:45.390
because we expect that value to be set

67
00:03:45.390 --> 00:03:49.590
from outside this component, TypeScript complains

68
00:03:49.590 --> 00:03:51.660
that it doesn't know which type

69
00:03:51.660 --> 00:03:55.050
of value will eventually be received here.

70
00:03:55.050 --> 00:03:58.170
And it's kind of TypeScript's main thing

71
00:03:58.170 --> 00:04:01.950
to know which kind of value is being used where,

72
00:04:01.950 --> 00:04:03.723
that's why it's complaining here.

73
00:04:04.980 --> 00:04:09.720
Therefore, what we should do here is explicitly assign

74
00:04:09.720 --> 00:04:12.510
a value type to this property.

75
00:04:12.510 --> 00:04:16.680
By adding a colon here, that's a special TypeScript feature

76
00:04:16.680 --> 00:04:20.970
that you can assign a type to a property, for example,

77
00:04:20.970 --> 00:04:23.650
by adding a colon after the property name

78
00:04:24.750 --> 00:04:28.290
and by then setting the type that will be received here.

79
00:04:28.290 --> 00:04:30.363
And in this case, this will be a string,

80
00:04:31.410 --> 00:04:33.060
and that's now one of the types

81
00:04:33.060 --> 00:04:34.947
that are built into TypeScript

82
00:04:34.947 --> 00:04:38.160
and that are supported out of the box.

83
00:04:38.160 --> 00:04:41.880
You have string, number, Boolean,

84
00:04:41.880 --> 00:04:45.270
and you can also set up more complex object types

85
00:04:45.270 --> 00:04:49.080
for example, though, we'll take a look at that later.

86
00:04:49.080 --> 00:04:51.630
For the moment, we can just use a string here

87
00:04:51.630 --> 00:04:54.000
because the avatar will be a string

88
00:04:54.000 --> 00:04:56.910
and we now get a different error.

89
00:04:56.910 --> 00:05:01.530
We get a error that the property avatar has no initializer

90
00:05:01.530 --> 00:05:04.293
and is not definitely assigned in the constructor,

91
00:05:05.460 --> 00:05:09.480
which in the end means that TypeScript now knows

92
00:05:09.480 --> 00:05:11.220
that this should be a string,

93
00:05:11.220 --> 00:05:12.930
but it does not understand

94
00:05:12.930 --> 00:05:15.450
that we're using an Angular mechanism

95
00:05:15.450 --> 00:05:18.630
for receiving the value of this property.

96
00:05:18.630 --> 00:05:20.220
All TypeScript sees

97
00:05:20.220 --> 00:05:24.240
is that there is no value being set at any point

98
00:05:24.240 --> 00:05:25.380
in this component.

99
00:05:25.380 --> 00:05:28.620
Instead, it's an uninitialized property.

100
00:05:28.620 --> 00:05:31.473
And that's exactly what this complaint is about.

101
00:05:32.820 --> 00:05:36.600
Now, we can work around that by adding an exclamation mark

102
00:05:36.600 --> 00:05:38.310
after the property name.

103
00:05:38.310 --> 00:05:40.890
That's another TypeScript feature,

104
00:05:40.890 --> 00:05:44.700
which simply tells TypeScript that we know

105
00:05:44.700 --> 00:05:48.570
that this will definitely be set to some value,

106
00:05:48.570 --> 00:05:52.170
even though TypeScript can't see it in this code.

107
00:05:52.170 --> 00:05:55.659
But of course, we know that the value will be set

108
00:05:55.659 --> 00:05:59.070
from outside here by assigning an avatar value

109
00:05:59.070 --> 00:06:01.503
when we use the user component.

110
00:06:02.610 --> 00:06:06.600
And that's now how we can get this avatar property value

111
00:06:06.600 --> 00:06:08.520
from outside this component

112
00:06:08.520 --> 00:06:12.723
and how we can therefore reuse this app user component.

113
00:06:14.160 --> 00:06:16.980
Now of course, we can add more inputs

114
00:06:16.980 --> 00:06:19.200
and also add an input for the name,

115
00:06:19.200 --> 00:06:20.940
which will also be a string

116
00:06:20.940 --> 00:06:23.280
so that we can also set the user name

117
00:06:23.280 --> 00:06:25.773
from outside the user component.

118
00:06:27.420 --> 00:06:28.740
Therefore in the app component

119
00:06:28.740 --> 00:06:30.730
we can now also set the name here

120
00:06:31.860 --> 00:06:34.680
and also use property binding there to set it

121
00:06:34.680 --> 00:06:36.810
to a dynamic value

122
00:06:36.810 --> 00:06:41.313
and set the name to users[0].name in this case,

123
00:06:42.300 --> 00:06:45.510
and then repeat this for all the instances

124
00:06:45.510 --> 00:06:47.280
of this user component

125
00:06:47.280 --> 00:06:50.673
just with different indexes like that.

126
00:06:52.890 --> 00:06:55.410
And now there's just one last step,

127
00:06:55.410 --> 00:06:57.810
and that is that we should bring back

128
00:06:57.810 --> 00:07:00.213
this computed image path here.

129
00:07:01.140 --> 00:07:04.770
Using a getter again, since I'm not using a signal here

130
00:07:04.770 --> 00:07:08.160
because I'm relying on that image path

131
00:07:08.160 --> 00:07:09.930
in that template, right?

132
00:07:09.930 --> 00:07:10.983
I'm using it here.

133
00:07:12.600 --> 00:07:17.600
So we should actually again, return that image path here,

134
00:07:18.240 --> 00:07:21.510
which was assets/users/

135
00:07:21.510 --> 00:07:24.603
and then add this avatar to the path.

136
00:07:26.280 --> 00:07:28.560
And now as a final step, we just have

137
00:07:28.560 --> 00:07:30.720
to update the user template again,

138
00:07:30.720 --> 00:07:32.910
because we're not using signals anymore.

139
00:07:32.910 --> 00:07:36.300
So all these parentheses here have to go,

140
00:07:36.300 --> 00:07:38.400
not the parentheses here

141
00:07:38.400 --> 00:07:41.490
because this is still an event binding,

142
00:07:41.490 --> 00:07:46.290
but in all the places where we access properties,

143
00:07:46.290 --> 00:07:49.080
and actually we don't have a selected user anymore.

144
00:07:49.080 --> 00:07:52.350
Instead now we just have a name property which contains

145
00:07:52.350 --> 00:07:53.583
the name of the user.

146
00:07:55.320 --> 00:07:58.740
And with all that, if we save this,

147
00:07:58.740 --> 00:08:02.880
you see that if I reload, I now got a list of users here.

148
00:08:02.880 --> 00:08:06.870
And every user outputs some different data.

149
00:08:06.870 --> 00:08:10.350
And that's the idea behind using inputs like this,

150
00:08:10.350 --> 00:08:12.990
which make your components configurable

151
00:08:12.990 --> 00:08:15.423
and therefore more reusable.

