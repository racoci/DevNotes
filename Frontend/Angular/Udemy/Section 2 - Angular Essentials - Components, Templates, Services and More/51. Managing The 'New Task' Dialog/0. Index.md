# 51. Managing The "New Task" Dialog

> Duração: `7min`

## Recursos
- [new-task.component.html](https://github.com/mschwarzmueller/angular-complete-guide-course-resources/blob/main/attachments/02-essentials/new-task.component.html)
- [new-task.component.css](https://github.com/mschwarzmueller/angular-complete-guide-course-resources/blob/main/attachments/02-essentials/new-task.component.css)

WEBVTT

1
00:00:00.540 --> 00:00:03.210
<v Maximilian>So now I wanna work on the template</v>

2
00:00:03.210 --> 00:00:06.930
and the styling of this new-task.component.

3
00:00:06.930 --> 00:00:09.390
And for that, attached you actually find

4
00:00:09.390 --> 00:00:13.680
a prepared new-task.component.html file,

5
00:00:13.680 --> 00:00:16.080
which includes a dialog

6
00:00:16.080 --> 00:00:20.100
that's always open, which then in turn holds a form

7
00:00:20.100 --> 00:00:22.053
with some input fields.

8
00:00:22.890 --> 00:00:26.280
Now, there is no Angular-specific code in there,

9
00:00:26.280 --> 00:00:28.530
which is why I prepared it for you

10
00:00:28.530 --> 00:00:30.120
just so that we save some time,

11
00:00:30.120 --> 00:00:32.250
and we don't have to write it all together.

12
00:00:32.250 --> 00:00:34.350
But in the end, it's just some markup

13
00:00:34.350 --> 00:00:38.280
that we'll use the default browser built in dialog element

14
00:00:38.280 --> 00:00:41.730
to show a form as an overlay above the rest

15
00:00:41.730 --> 00:00:44.430
of the page content and attached,

16
00:00:44.430 --> 00:00:48.720
you therefore also find a new-task.component.css file,

17
00:00:48.720 --> 00:00:51.423
which includes some required styles.

18
00:00:53.250 --> 00:00:57.000
With that, if you use these two attached files,

19
00:00:57.000 --> 00:01:01.770
the HTML and the CSS file, if you save everything,

20
00:01:01.770 --> 00:01:03.990
you should be able to add a task

21
00:01:03.990 --> 00:01:08.460
and get this overlay dialog when trying to do that.

22
00:01:08.460 --> 00:01:09.720
But, of course, at the moment,

23
00:01:09.720 --> 00:01:11.610
this dialog doesn't do anything

24
00:01:11.610 --> 00:01:14.250
and we also can't really close it

25
00:01:14.250 --> 00:01:17.160
because that's now the logic we'll add together

26
00:01:17.160 --> 00:01:19.140
with help of Angular.

27
00:01:19.140 --> 00:01:23.100
And let's start with making sure that we can close it,

28
00:01:23.100 --> 00:01:25.440
for example, by clicking on the backdrop

29
00:01:25.440 --> 00:01:28.740
or by clicking this cancel button here.

30
00:01:28.740 --> 00:01:33.570
And the idea is to essentially emit an event

31
00:01:33.570 --> 00:01:37.830
from inside this new-task.component when this backdrop

32
00:01:37.830 --> 00:01:40.590
or this Cancel button here is clicked,

33
00:01:40.590 --> 00:01:44.310
a cancel event let's say, which can then be handled

34
00:01:44.310 --> 00:01:48.600
by the tasks.component, which is the component

35
00:01:48.600 --> 00:01:52.800
that is rendering this new-task.component.

36
00:01:52.800 --> 00:01:56.220
So that we set, this isAddingTask property

37
00:01:56.220 --> 00:02:00.000
in that tasks.component back to false,

38
00:02:00.000 --> 00:02:03.090
which it also is initially if we clicked on Cancel

39
00:02:03.090 --> 00:02:04.203
or the backdrop.

40
00:02:05.160 --> 00:02:07.170
Now again, this is definitely something

41
00:02:07.170 --> 00:02:09.990
you can try implementing on your own first

42
00:02:09.990 --> 00:02:12.090
because you will only need knowledge

43
00:02:12.090 --> 00:02:14.040
you already gained thus far.

44
00:02:14.040 --> 00:02:16.230
But after a short pause, which you can use

45
00:02:16.230 --> 00:02:19.353
to pause the video, we'll implement it together.

46
00:02:22.260 --> 00:02:25.440
So to make this dialog closeable,

47
00:02:25.440 --> 00:02:29.820
I will start here in the tasks.component TypeScript file

48
00:02:29.820 --> 00:02:32.430
by adding another new method.

49
00:02:32.430 --> 00:02:35.310
Maybe here at the bottom, though the exact position

50
00:02:35.310 --> 00:02:39.317
doesn't matter, and I'll name it onCancelAddTask.

51
00:02:40.664 --> 00:02:42.510
That sounds like a fitting name

52
00:02:42.510 --> 00:02:46.960
because it should be invoked when we cancel this process

53
00:02:47.850 --> 00:02:51.543
and in there, we can set isAddingTask to false,

54
00:02:52.650 --> 00:02:56.130
which because of the code in its template,

55
00:02:56.130 --> 00:03:00.630
we'll then remove this new-task.component from the DOM

56
00:03:00.630 --> 00:03:03.660
because this is only rendered conditionally

57
00:03:03.660 --> 00:03:06.993
with help of @if if isAddingTask is true.

58
00:03:08.010 --> 00:03:10.080
If isAddingTask is set to false,

59
00:03:10.080 --> 00:03:13.260
it will therefore be removed by Angular automatically

60
00:03:13.260 --> 00:03:15.390
because of how Angular works

61
00:03:15.390 --> 00:03:18.663
and because of our declarative template code here.

62
00:03:19.980 --> 00:03:22.230
So therefore now, we, of course, must make sure

63
00:03:22.230 --> 00:03:25.170
that we do invoke onCancelAddTask

64
00:03:25.170 --> 00:03:27.330
if the dialog is closed.

65
00:03:27.330 --> 00:03:28.860
And therefore, we should go

66
00:03:28.860 --> 00:03:31.860
to the new-task.component.html file,

67
00:03:31.860 --> 00:03:35.010
which is responsible for rendering that dialog.

68
00:03:35.010 --> 00:03:39.210
And we should add click listeners here on that backdrop div

69
00:03:39.210 --> 00:03:42.690
so that clicking the backdrop will close the dialog

70
00:03:42.690 --> 00:03:45.540
and on this Cancel button here.

71
00:03:45.540 --> 00:03:47.070
By the way, it's important

72
00:03:47.070 --> 00:03:49.980
that this button here is of type="button,"

73
00:03:49.980 --> 00:03:53.940
not because of Angular, but because of how the web works

74
00:03:53.940 --> 00:03:56.070
because of it would be of type Submit,

75
00:03:56.070 --> 00:03:58.500
it would actually trigger a form submission,

76
00:03:58.500 --> 00:04:01.740
which could have unwanted side effects.

77
00:04:01.740 --> 00:04:04.110
By setting this button to type="button",

78
00:04:04.110 --> 00:04:05.880
this will not occur.

79
00:04:05.880 --> 00:04:09.153
But that's just a side note, not specific to Angular.

80
00:04:10.740 --> 00:04:13.050
Now, these click listeners on the Cancel button,

81
00:04:13.050 --> 00:04:16.260
the backdrop, should invoke a method inside

82
00:04:16.260 --> 00:04:17.973
of the new-task.component.

83
00:04:18.870 --> 00:04:21.180
So in here in the component class,

84
00:04:21.180 --> 00:04:24.570
we can add a new onCancel method.

85
00:04:24.570 --> 00:04:29.220
And now I wanna emit a custom event whenever that happens.

86
00:04:29.220 --> 00:04:33.780
So as you learned it before, we should use @Output here,

87
00:04:33.780 --> 00:04:37.740
which of course is imported from @angular/core as always.

88
00:04:37.740 --> 00:04:40.320
And then add our own event property,

89
00:04:40.320 --> 00:04:44.580
which could be named cancel since this accurately describes

90
00:04:44.580 --> 00:04:46.533
the kind of event we're adding here.

91
00:04:47.730 --> 00:04:50.700
Now, this should be a new EventEmitter as always,

92
00:04:50.700 --> 00:04:52.713
imported from @angular/core.

93
00:04:53.940 --> 00:04:55.650
And this will be an EventEmitter

94
00:04:55.650 --> 00:04:58.893
that will actually not transmit any kind of data.

95
00:04:59.910 --> 00:05:02.550
Therefore, as a generic type annotation,

96
00:05:02.550 --> 00:05:05.610
you should add the special void type here.

97
00:05:05.610 --> 00:05:08.340
Now, that is something you didn't know in advance,

98
00:05:08.340 --> 00:05:09.840
but you could also set it up

99
00:05:09.840 --> 00:05:13.710
without any generic type information at all.

100
00:05:13.710 --> 00:05:16.710
Void is just a special type that essentially means

101
00:05:16.710 --> 00:05:20.310
that there will be no data being emitted.

102
00:05:20.310 --> 00:05:23.340
And with that, we can then go here to onCancel

103
00:05:23.340 --> 00:05:25.380
and use our cancel property

104
00:05:25.380 --> 00:05:28.833
to emit a new event which does not carry any data.

105
00:05:30.390 --> 00:05:33.750
And now with that, we can use this onCancel method here

106
00:05:33.750 --> 00:05:36.840
in the new-task.component.html file,

107
00:05:36.840 --> 00:05:39.570
both for the backdrop click listener

108
00:05:39.570 --> 00:05:43.020
and this Cancel button click listener.

109
00:05:43.020 --> 00:05:47.070
And we can then use our own cancel event here,

110
00:05:47.070 --> 00:05:51.870
so to say, in the tasks.component template

111
00:05:51.870 --> 00:05:53.880
to listen for that cancel event

112
00:05:53.880 --> 00:05:56.700
on the new-task.component instance.

113
00:05:56.700 --> 00:05:59.867
And then here we wanna invoke onCancelAddTask.

114
00:06:00.810 --> 00:06:04.050
This method we added a couple of minutes ago.

115
00:06:04.050 --> 00:06:06.600
If you now save everything, you should be able

116
00:06:06.600 --> 00:06:10.470
to open this dialog, but to then also close it

117
00:06:10.470 --> 00:06:13.230
by clicking on the backdrop like this

118
00:06:13.230 --> 00:06:15.723
or by clicking on the Cancel button.

119
00:06:17.070 --> 00:06:20.790
And that's another important step into the right direction.

120
00:06:20.790 --> 00:06:22.920
Next, we, of course, wanna make sure

121
00:06:22.920 --> 00:06:25.710
that we also extract the entered data

122
00:06:25.710 --> 00:06:28.833
and we actually do create a new task.

