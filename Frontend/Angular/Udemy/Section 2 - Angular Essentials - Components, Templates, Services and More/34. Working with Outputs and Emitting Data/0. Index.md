# 34. Working with Outputs & Emitting Data

> Duração: `7min`

Sem Recursos

WEBVTT

1
00:00:00.360 --> 00:00:02.100
<v Maximilian>To set up such a property,</v>

2
00:00:02.100 --> 00:00:04.770
you can add another regular property

3
00:00:04.770 --> 00:00:07.080
and give it any name of your choice.

4
00:00:07.080 --> 00:00:08.700
For example, select

5
00:00:08.700 --> 00:00:13.230
because we wanna create kind of a custom select event,

6
00:00:13.230 --> 00:00:14.220
you could say.

7
00:00:14.220 --> 00:00:16.680
We wanna pass the information

8
00:00:16.680 --> 00:00:20.580
that a specific user was selected to the component

9
00:00:20.580 --> 00:00:23.130
that's using the UserComponent.

10
00:00:23.130 --> 00:00:25.980
So select sounds like a fitting name.

11
00:00:25.980 --> 00:00:28.980
And this select component must be decorated

12
00:00:28.980 --> 00:00:32.670
with another decorator that's imported from Angular,

13
00:00:32.670 --> 00:00:34.893
the Output decorator.

14
00:00:36.360 --> 00:00:38.910
This is imported from @angular/core

15
00:00:38.910 --> 00:00:41.310
and then used just like input

16
00:00:41.310 --> 00:00:45.123
by executing it like this in front of the select property.

17
00:00:46.710 --> 00:00:48.720
Now, unlike an input,

18
00:00:48.720 --> 00:00:52.500
the select property will receive an initial value though,

19
00:00:52.500 --> 00:00:54.423
assigned with that equal sign.

20
00:00:55.500 --> 00:01:00.500
And that initial value is a new EventEmitter object

21
00:01:00.990 --> 00:01:04.860
where EventEmitter is actually also imported

22
00:01:04.860 --> 00:01:06.663
from @angular/core.

23
00:01:08.460 --> 00:01:10.620
And this instance

24
00:01:10.620 --> 00:01:13.890
of the EventEmitter class we're creating here,

25
00:01:13.890 --> 00:01:17.820
so this EventEmitter object we're getting here in the end

26
00:01:17.820 --> 00:01:22.590
will then allow us to emit custom values

27
00:01:22.590 --> 00:01:24.660
through that select property

28
00:01:24.660 --> 00:01:27.783
to any parent component that's interested.

29
00:01:28.890 --> 00:01:32.940
And for that, here in onSelectUser, which is that function

30
00:01:32.940 --> 00:01:35.090
that's triggered when we click that button,

31
00:01:36.000 --> 00:01:38.820
in that function, in this method here,

32
00:01:38.820 --> 00:01:41.250
I want to use this select property

33
00:01:41.250 --> 00:01:43.893
to emit a new value.

34
00:01:45.030 --> 00:01:47.550
And now we just have to pass the value

35
00:01:47.550 --> 00:01:51.150
that should be emitted to this emit method,

36
00:01:51.150 --> 00:01:53.880
which is provided by that EventEmitter object,

37
00:01:53.880 --> 00:01:55.743
which is stored in select.

38
00:01:57.030 --> 00:02:01.710
Now, we don't have to set a value here if we don't want to,

39
00:02:01.710 --> 00:02:04.380
but we, of course, can.

40
00:02:04.380 --> 00:02:06.270
And we might, for example,

41
00:02:06.270 --> 00:02:09.480
want to accept another input first,

42
00:02:09.480 --> 00:02:14.480
the ID of the user, let's say, which should also be a string

43
00:02:16.860 --> 00:02:18.900
because in my dummy users,

44
00:02:18.900 --> 00:02:22.053
every user has such a string ID,

45
00:02:23.010 --> 00:02:26.310
and that should also be required.

46
00:02:26.310 --> 00:02:28.230
And then we can convince TypeScript

47
00:02:28.230 --> 00:02:30.393
with that exclamation mark that it is.

48
00:02:31.380 --> 00:02:36.380
And now we could emit this.id here in onSelectUser

49
00:02:36.480 --> 00:02:38.250
because we receive it as an input

50
00:02:38.250 --> 00:02:39.810
and we pass it back

51
00:02:39.810 --> 00:02:43.653
to the parent component whenever a user is selected.

52
00:02:44.580 --> 00:02:47.130
Now we have to go back to the app.component

53
00:02:47.130 --> 00:02:49.950
and of course, set the ID here

54
00:02:49.950 --> 00:02:54.907
and set it to users[0].id on the first user

55
00:02:55.950 --> 00:02:59.700
and then copy and paste this to all other users,

56
00:02:59.700 --> 00:03:03.273
and access the other indexes of those users.

57
00:03:04.500 --> 00:03:07.350
And I'll now press that format document shortcut

58
00:03:07.350 --> 00:03:09.573
to make this code look a bit prettier.

59
00:03:11.250 --> 00:03:14.873
And we can now also listen to our custom event here

60
00:03:14.873 --> 00:03:17.730
because that's the other thing we added.

61
00:03:17.730 --> 00:03:20.040
We added this select output

62
00:03:20.040 --> 00:03:21.540
and with that added,

63
00:03:21.540 --> 00:03:26.540
we can use event binding on our custom component to listen

64
00:03:26.640 --> 00:03:30.000
for this select event because we, in the end now,

65
00:03:30.000 --> 00:03:33.783
did create our own custom event called select.

66
00:03:35.100 --> 00:03:36.480
And we can now handle this

67
00:03:36.480 --> 00:03:40.470
just as we can handle any built-in event.

68
00:03:40.470 --> 00:03:44.280
We can add a method to the app.component,

69
00:03:44.280 --> 00:03:46.030
which could be called onSelectUser.

70
00:03:47.430 --> 00:03:49.563
The name, of course, is up to you though.

71
00:03:51.330 --> 00:03:55.863
And here we then expect to get the ID of that user.

72
00:03:57.240 --> 00:04:00.060
Now, if I just add the ID parameter like this,

73
00:04:00.060 --> 00:04:03.180
I'm again getting a complaint by TypeScript though

74
00:04:03.180 --> 00:04:07.770
because the parameter 'id' implicitly has the 'any' type.

75
00:04:07.770 --> 00:04:11.160
So that's a similar problem as we faced before

76
00:04:11.160 --> 00:04:12.630
because in the end, the problem here

77
00:04:12.630 --> 00:04:15.450
is that TypeScript doesn't know which type

78
00:04:15.450 --> 00:04:18.120
of value will get here and it wants to know

79
00:04:18.120 --> 00:04:21.000
because it is its main thing.

80
00:04:21.000 --> 00:04:25.590
Therefore, just as before with those properties here,

81
00:04:25.590 --> 00:04:28.260
we have to tell TypeScript which kind

82
00:04:28.260 --> 00:04:31.860
of value will be received here in this method

83
00:04:31.860 --> 00:04:33.630
by adding a colon

84
00:04:33.630 --> 00:04:36.350
and by then adding the type that will get here,

85
00:04:36.350 --> 00:04:38.103
in this case, a string type.

86
00:04:39.060 --> 00:04:41.460
And now with that, TypeScript is happy.

87
00:04:41.460 --> 00:04:42.780
And here for the moment,

88
00:04:42.780 --> 00:04:47.700
we can simply console.log selected user with id

89
00:04:47.700 --> 00:04:49.440
and then output that ID

90
00:04:49.440 --> 00:04:52.143
that we're receiving, like this, for example.

91
00:04:53.940 --> 00:04:57.660
Now with that added, it's this onSelectUser method,

92
00:04:57.660 --> 00:04:59.550
which I wanna set as a value

93
00:04:59.550 --> 00:05:02.763
for my custom select event, like that.

94
00:05:03.990 --> 00:05:06.000
However, now, of course, I'm getting an error here

95
00:05:06.000 --> 00:05:10.470
because onSelectUser expected one argument but got zero.

96
00:05:10.470 --> 00:05:14.010
I am not passing anything here yet.

97
00:05:14.010 --> 00:05:18.120
And the value I do wanna pass here to onSelectUser,

98
00:05:18.120 --> 00:05:22.050
of course, should be the ID that is emitted

99
00:05:22.050 --> 00:05:23.823
by this user component.

100
00:05:24.960 --> 00:05:28.410
But how do we now get hold of that emitted value here

101
00:05:28.410 --> 00:05:30.363
in the template of the app.component?

102
00:05:31.380 --> 00:05:35.250
Well, you can get hold of emitted values with help

103
00:05:35.250 --> 00:05:39.210
of a special variable that's provided by Angular:

104
00:05:39.210 --> 00:05:41.763
the $event variable.

105
00:05:42.780 --> 00:05:44.010
That's a reserved name.

106
00:05:44.010 --> 00:05:48.930
It's a variable provided by Angular in its templates

107
00:05:48.930 --> 00:05:51.570
or specifically in the parts

108
00:05:51.570 --> 00:05:55.290
where you handle events in your templates.

109
00:05:55.290 --> 00:05:57.420
So for example, here between the quotes

110
00:05:57.420 --> 00:05:59.580
of this event binding

111
00:05:59.580 --> 00:06:04.580
and this $event variable will then hold the data,

112
00:06:04.740 --> 00:06:07.320
the value that was emitted

113
00:06:07.320 --> 00:06:09.423
by the event you're listening to.

114
00:06:11.010 --> 00:06:14.070
And with that, we therefore then are able

115
00:06:14.070 --> 00:06:15.963
to handle that event.

116
00:06:16.950 --> 00:06:20.130
And now, of course, we can copy and paste that

117
00:06:20.130 --> 00:06:24.273
to all the other app-user components as well.

118
00:06:25.290 --> 00:06:28.890
And with that done, if we save everything

119
00:06:28.890 --> 00:06:31.710
and we open those developer tools here,

120
00:06:31.710 --> 00:06:34.710
if I click on a user, you see

121
00:06:34.710 --> 00:06:39.390
that I get this output selected with user id u1.

122
00:06:39.390 --> 00:06:43.260
For the second user, I get u2 and so on.

123
00:06:43.260 --> 00:06:46.770
So this is working and this, therefore,

124
00:06:46.770 --> 00:06:50.760
is how you can emit your own events with help

125
00:06:50.760 --> 00:06:54.090
of output and how you can then handle them

126
00:06:54.090 --> 00:06:57.093
and also get access to the emitted data.

