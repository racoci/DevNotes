# 52. Using Directives & Two-Way-Binding

> Duração: `11min`

Sem Recursos

WEBVTT

1
00:00:00.390 --> 00:00:02.940
<v Instructor>So when using Angular,</v>

2
00:00:02.940 --> 00:00:07.080
how can we now get those entered values

3
00:00:07.080 --> 00:00:10.860
from the input text area and the other input here

4
00:00:10.860 --> 00:00:13.920
when that form is submitted?

5
00:00:13.920 --> 00:00:15.480
Now as always in programming,

6
00:00:15.480 --> 00:00:17.160
there will be different approaches,

7
00:00:17.160 --> 00:00:19.830
but here is one of the most common ways

8
00:00:19.830 --> 00:00:23.160
of handling form inputs and form submissions.

9
00:00:23.160 --> 00:00:26.160
We'll use another way of binding templates

10
00:00:26.160 --> 00:00:30.000
to data called two-way binding,

11
00:00:30.000 --> 00:00:33.450
which in the end is the combination of property

12
00:00:33.450 --> 00:00:36.273
and event binding, as you will see.

13
00:00:37.170 --> 00:00:39.090
Now to use two-way binding,

14
00:00:39.090 --> 00:00:42.453
we have to go back to the new task component,

15
00:00:43.290 --> 00:00:46.530
so to the class of that template.

16
00:00:46.530 --> 00:00:48.750
And then in there, we can add a new property

17
00:00:48.750 --> 00:00:50.790
called enteredTitle.

18
00:00:50.790 --> 00:00:52.500
The name is up to you of course,

19
00:00:52.500 --> 00:00:55.170
but the idea is to store the title

20
00:00:55.170 --> 00:00:57.930
that is entered in this input field.

21
00:00:57.930 --> 00:01:01.680
Now I'll assign an initial value of an empty string,

22
00:01:01.680 --> 00:01:03.960
and therefore TypeScript correctly infers

23
00:01:03.960 --> 00:01:06.780
that this property will be of type string.

24
00:01:06.780 --> 00:01:09.870
So no further information is needed here.

25
00:01:09.870 --> 00:01:12.060
We also don't need input or output,

26
00:01:12.060 --> 00:01:15.990
since we'll only use this property inside of this component

27
00:01:15.990 --> 00:01:17.373
and its template.

28
00:01:18.720 --> 00:01:22.020
But now I wanna make sure that with every keystroke

29
00:01:22.020 --> 00:01:25.530
the user makes in that input field,

30
00:01:25.530 --> 00:01:29.520
this property here and the value stored in that property

31
00:01:29.520 --> 00:01:33.333
will be updated with the value entered by the user.

32
00:01:34.320 --> 00:01:39.000
And this is done by adding a special directive

33
00:01:39.000 --> 00:01:42.150
as it's called, to the input field

34
00:01:42.150 --> 00:01:44.730
on which you wanna listen for changes.

35
00:01:44.730 --> 00:01:48.300
And that's the ngModel directive.

36
00:01:48.300 --> 00:01:51.180
And by the way, whenever something starts with ng,

37
00:01:51.180 --> 00:01:53.460
you know that it's coming from Angular,

38
00:01:53.460 --> 00:01:56.220
that it's built into Angular.

39
00:01:56.220 --> 00:01:59.400
Now directives are an Angular feature,

40
00:01:59.400 --> 00:02:03.420
which we will explore in greater detail later in the course,

41
00:02:03.420 --> 00:02:05.730
and then you will also learn

42
00:02:05.730 --> 00:02:08.430
how you can build your own directives.

43
00:02:08.430 --> 00:02:12.450
But the main idea behind this directive feature

44
00:02:12.450 --> 00:02:15.180
really just is that they allow you

45
00:02:15.180 --> 00:02:20.180
to add extra functionalities to elements.

46
00:02:21.000 --> 00:02:24.570
In the end, directives are almost like components,

47
00:02:24.570 --> 00:02:26.490
because the idea behind components

48
00:02:26.490 --> 00:02:29.370
also is that you can build your own things

49
00:02:29.370 --> 00:02:32.010
that bring their own functionality.

50
00:02:32.010 --> 00:02:37.010
But directives, unlike components, don't have templates.

51
00:02:37.140 --> 00:02:40.410
And indeed components in Angular are considered

52
00:02:40.410 --> 00:02:43.470
to be directives with templates.

53
00:02:43.470 --> 00:02:45.480
So if we're talking about a component,

54
00:02:45.480 --> 00:02:47.790
we have a directive with a template.

55
00:02:47.790 --> 00:02:50.190
If we talk about a directive, we have,

56
00:02:50.190 --> 00:02:54.210
well, just a directive, just an enhancement to an element

57
00:02:54.210 --> 00:02:57.123
that does not bring its own template.

58
00:02:58.020 --> 00:03:00.420
But that's not too important right now,

59
00:03:00.420 --> 00:03:03.780
because for the most part, you will work with components,

60
00:03:03.780 --> 00:03:07.290
but occasionally you need some directives here and there,

61
00:03:07.290 --> 00:03:09.750
like the ngModel directive here,

62
00:03:09.750 --> 00:03:11.820
like maybe some directive you'll build

63
00:03:11.820 --> 00:03:13.800
on your own later in the course,

64
00:03:13.800 --> 00:03:17.490
or like the ngFor directive I mentioned earlier,

65
00:03:17.490 --> 00:03:20.040
in case you are using an Angular version

66
00:03:20.040 --> 00:03:25.040
where this more modern @for syntax is not supported.

67
00:03:25.380 --> 00:03:28.200
But that's the idea behind directives.

68
00:03:28.200 --> 00:03:32.250
They simply are Angular-powered element enhancements,

69
00:03:32.250 --> 00:03:33.570
you could say.

70
00:03:33.570 --> 00:03:36.210
And this ngModel directive here

71
00:03:36.210 --> 00:03:40.200
is a directive offered by Angular that's meant to be used

72
00:03:40.200 --> 00:03:45.200
with input or text area, or other form-related elements

73
00:03:45.600 --> 00:03:50.520
to help you get access to the value entered by the user

74
00:03:50.520 --> 00:03:51.990
into those elements.

75
00:03:51.990 --> 00:03:56.010
And specifically this ngModel directive can be used

76
00:03:56.010 --> 00:03:58.140
with that two-way binding feature.

77
00:03:58.140 --> 00:04:01.170
I'm about to show you to set up some

78
00:04:01.170 --> 00:04:05.670
life tracking connection to the value entered by the user,

79
00:04:05.670 --> 00:04:08.820
so that you can keep track of it with every keystroke

80
00:04:08.820 --> 00:04:12.393
and so that you could also override it if needed.

81
00:04:13.620 --> 00:04:16.710
Which looks like this.

82
00:04:16.710 --> 00:04:20.490
You wrap it with parentheses,

83
00:04:20.490 --> 00:04:23.703
and then you wrap that with square brackets.

84
00:04:24.750 --> 00:04:29.040
And this is a special syntax built into Angular

85
00:04:29.040 --> 00:04:32.160
that sets up two-way binding

86
00:04:32.160 --> 00:04:35.700
for this ngModel directive in this case.

87
00:04:35.700 --> 00:04:40.700
Now this two-way binding syntax can not be used

88
00:04:41.490 --> 00:04:44.970
on any property of elements.

89
00:04:44.970 --> 00:04:49.970
Instead by default, no element properties supported.

90
00:04:50.820 --> 00:04:55.290
NgModel, however, is a directive offered by Angular,

91
00:04:55.290 --> 00:04:58.710
which does support two-way binding.

92
00:04:58.710 --> 00:05:02.070
Later in the course, when we dive deeper into components

93
00:05:02.070 --> 00:05:05.880
and directives, and other things, you will also learn

94
00:05:05.880 --> 00:05:09.630
how to support two-way binding on your own properties

95
00:05:09.630 --> 00:05:11.940
in your own components for example.

96
00:05:11.940 --> 00:05:15.120
But for the moment, we'll use this ngModel directive,

97
00:05:15.120 --> 00:05:18.120
which was built by the Angular team

98
00:05:18.120 --> 00:05:22.320
to help us with getting input from input elements.

99
00:05:22.320 --> 00:05:24.780
And that's exactly what we're trying to do here,

100
00:05:24.780 --> 00:05:28.440
and we can do it with help of this two-way binding syntax,

101
00:05:28.440 --> 00:05:32.730
which is supported by this ngModel directive.

102
00:05:32.730 --> 00:05:37.730
So you can think of this ngModel thing here

103
00:05:37.740 --> 00:05:42.420
basically as something that's placed on an input element

104
00:05:42.420 --> 00:05:47.310
to add extra features and properties to that element

105
00:05:47.310 --> 00:05:49.620
under the hood, behind the scenes.

106
00:05:49.620 --> 00:05:52.890
Like for example, this ngModel property,

107
00:05:52.890 --> 00:05:55.800
which supports two-way binding.

108
00:05:55.800 --> 00:06:00.420
And in general, the idea behind this directives feature

109
00:06:00.420 --> 00:06:04.350
is that you can build things, directives,

110
00:06:04.350 --> 00:06:08.130
which enhance the elements on which they are placed

111
00:06:08.130 --> 00:06:11.940
by adding extra features, extra behaviors,

112
00:06:11.940 --> 00:06:13.980
or properties to them,

113
00:06:13.980 --> 00:06:17.250
like the ngModel directive does it here.

114
00:06:17.250 --> 00:06:19.170
And again, you will learn

115
00:06:19.170 --> 00:06:21.540
how to build your own directives later,

116
00:06:21.540 --> 00:06:24.480
and then also see how they work behind the scenes.

117
00:06:24.480 --> 00:06:26.820
But for the moment, we can use ngModel

118
00:06:26.820 --> 00:06:31.500
with this two-way binding syntax here to give you access

119
00:06:31.500 --> 00:06:35.880
to the value entered into this input field by the user,

120
00:06:35.880 --> 00:06:38.640
whilst at the same time allowing you

121
00:06:38.640 --> 00:06:41.850
to write data back into this input.

122
00:06:41.850 --> 00:06:44.010
That's what two-way binding means.

123
00:06:44.010 --> 00:06:45.480
You can listen to input,

124
00:06:45.480 --> 00:06:49.920
but also output data both with one syntax,

125
00:06:49.920 --> 00:06:51.963
with this syntax here.

126
00:06:53.520 --> 00:06:57.870
Now this two-way binding syntax then needs a property

127
00:06:57.870 --> 00:06:59.640
to which you wanna bind.

128
00:06:59.640 --> 00:07:02.227
In my case here, the enteredTitle.

129
00:07:03.630 --> 00:07:05.940
But as you'll see, I will get an error

130
00:07:05.940 --> 00:07:07.740
if I try to set it up like this.

131
00:07:07.740 --> 00:07:11.550
And the error is that we can't bind to ngModel,

132
00:07:11.550 --> 00:07:14.910
since it isn't a known property of input.

133
00:07:14.910 --> 00:07:19.500
So in the end, ngModel is unknown to Angular.

134
00:07:19.500 --> 00:07:23.490
And the reason for that is that just like components,

135
00:07:23.490 --> 00:07:25.890
you are trying to use in your template,

136
00:07:25.890 --> 00:07:29.580
you have to register this directive

137
00:07:29.580 --> 00:07:31.743
in order to be able to use it.

138
00:07:32.640 --> 00:07:36.690
So we must go to the new-task.component.ts file.

139
00:07:36.690 --> 00:07:38.940
And then here in the imports array,

140
00:07:38.940 --> 00:07:42.090
we have to register this directive.

141
00:07:42.090 --> 00:07:46.443
And that's typically done by registering the FormsModule,

142
00:07:47.340 --> 00:07:52.293
which is a thing imported from @angular/forms.

143
00:07:54.090 --> 00:07:57.510
And you can think of that FormsModule

144
00:07:57.510 --> 00:08:02.340
as a collection of directives and features

145
00:08:02.340 --> 00:08:07.340
that help you with dealing with forms and with user input.

146
00:08:07.920 --> 00:08:10.950
And will use another feature of that FormsModule

147
00:08:10.950 --> 00:08:12.393
in a couple of minutes.

148
00:08:13.290 --> 00:08:15.990
This FormsModule when registered here

149
00:08:15.990 --> 00:08:19.440
then unlocks the ngModel directive.

150
00:08:19.440 --> 00:08:22.980
And that directive supports this two-way binding syntax,

151
00:08:22.980 --> 00:08:25.770
which allows us to set up two-way binding

152
00:08:25.770 --> 00:08:28.593
on this enteredTitle property.

153
00:08:30.000 --> 00:08:33.990
And you can see the two-way binding in action

154
00:08:33.990 --> 00:08:38.010
by copying this paragraph with this input here

155
00:08:38.010 --> 00:08:39.750
and pasting it in here.

156
00:08:39.750 --> 00:08:44.433
And then I'll name it title2 also on the id and the name.

157
00:08:45.450 --> 00:08:47.700
But I'll keep this two-way binding

158
00:08:47.700 --> 00:08:51.243
to the exact same property on both inputs.

159
00:08:53.100 --> 00:08:55.980
And if you know, save that and you that dialogue,

160
00:08:55.980 --> 00:08:58.230
you therefore see these two titles.

161
00:08:58.230 --> 00:09:01.770
But you'll notice that if you type into the first input,

162
00:09:01.770 --> 00:09:04.743
the second one changes as well.

163
00:09:05.940 --> 00:09:09.420
And that's happening, because it is two-way binding.

164
00:09:09.420 --> 00:09:11.490
We get the value that's being entered,

165
00:09:11.490 --> 00:09:14.793
but we also then write it back into the input field.

166
00:09:16.650 --> 00:09:19.260
That's why this can be a very useful feature,

167
00:09:19.260 --> 00:09:22.770
even though here, we of course don't need that second input.

168
00:09:22.770 --> 00:09:24.243
So I will delete it here.

169
00:09:25.560 --> 00:09:28.830
But therefore now, the enteredTitle property

170
00:09:28.830 --> 00:09:32.523
will be updated under the hood with every keystroke.

171
00:09:34.530 --> 00:09:36.455
And therefore, we can of course also add

172
00:09:36.455 --> 00:09:41.455
enteredSummary property in the new task component clause.

173
00:09:42.600 --> 00:09:46.410
And an enteredDate property,

174
00:09:46.410 --> 00:09:48.483
which also should hold a string.

175
00:09:50.490 --> 00:09:54.600
And then back in the new-task.component template,

176
00:09:54.600 --> 00:09:57.780
we can and should copy this ngModel code

177
00:09:57.780 --> 00:09:59.973
and also add it on the text area.

178
00:10:01.020 --> 00:10:04.953
But then here, I wanna bind the enteredSummary,

179
00:10:06.150 --> 00:10:09.240
and add it to this due-date input,

180
00:10:09.240 --> 00:10:10.803
and bind the enteredDate.

181
00:10:12.630 --> 00:10:17.630
And as a side note, inputs in HTML will always

182
00:10:18.480 --> 00:10:22.290
yield string values, even if it's of type date,

183
00:10:22.290 --> 00:10:24.600
it will not yield a date object,

184
00:10:24.600 --> 00:10:27.810
instead, it will yield a string value.

185
00:10:27.810 --> 00:10:31.803
That's why I also made enteredDate a string here.

186
00:10:33.570 --> 00:10:37.890
And with that, we'll now be updating these three properties

187
00:10:37.890 --> 00:10:41.340
as we're typing into their respective input fields.

188
00:10:41.340 --> 00:10:44.613
Now we just also have to handle the form submission.

