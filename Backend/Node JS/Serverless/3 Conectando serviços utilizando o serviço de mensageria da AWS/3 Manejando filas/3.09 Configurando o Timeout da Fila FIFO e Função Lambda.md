# 09 Configurando o Timeout da Fila FIFO e Função Lambda

Uma empresa de tecnologia, está desenvolvendo um sistema de mensagens internas utilizando a arquitetura serverless na AWS. Eles estão usando a função Lambda com filas FIFO do Amazon SQS. Para garantir o correto processamento das mensagens, eles precisam configurar adequadamente o tempo de timeout da função Lambda e o parâmetro `visibilityTimeout` da fila FIFO.

Como pessoa desenvolvedora dessa empresa, como você deveria configurar o tempo de timeout da função Lambda e o `visibilityTimeout` da fila FIFO para garantir que as mensagens não sejam retornadas à fila antes de serem completamente processadas?

- Alternativa incorreta
    
    Definir o `visibilityTimeout` da fila FIFO menor que o tempo máximo de execução da função Lambda.
    
    Definir o `visibilityTimeout` menor que o tempo de execução da função Lambda pode fazer com que a mensagem retorne à fila antes que a função Lambda tenha concluído seu processamento.
    
- Alternativa incorreta
    
    Definir o `visibilityTimeout` da fila FIFO igual ao tempo máximo de execução da função Lambda.
    
    Definir o `visibilityTimeout` igual ao tempo de execução da função Lambda pode não ser suficiente, já que a função Lambda pode levar mais tempo do que o esperado.
    
- Alternativa incorreta
    
    Definir o tempo máximo de execução da função Lambda igual ao `visibilityTimeout` da fila FIFO e dividir o trabalho em etapas menores.
    
    Mesmo dividindo o trabalho em etapas menores, é recomendado definir o `visibilityTimeout` da fila FIFO maior que o tempo máximo de execução da função Lambda. Além disso, dividir o trabalho em etapas menores pode não ser a melhor abordagem para o caso apresentado.
    
- Alternativa **correta**
    
    Definir o `visibilityTimeout` da fila FIFO maior que o tempo máximo de execução da função Lambda e adicionar uma margem de segurança.
    
    Definir o `visibilityTimeout` maior que o tempo máximo de execução da função Lambda e adicionar uma margem de segurança, garante que a mensagem permaneça visível e não seja entregue a outros consumidores antes que a função Lambda possa processá-la completamente.