# 2.12 Faça como eu fiz: revisando as rotas de livros

Entre as funcionalidades que adicionamos nesta aula, está a busca de livros via ID, criação de novos livros e atualização de livros. Vamos revisar o processo ponto por ponto:

**No arquivo: `src/app.js`**

- Adicione uma nova função chamada `buscaLivro` com um parâmetro chamado `id`;
- Dentro da função `buscaLivro`, utilize o método `findIndex` para encontrar o índice do livro que possui o mesmo ID passado como parâmetro;
- Retorne o resultado encontrado pelo método `findIndex` dentro da função `buscaLivro`.

```js
function buscaLivro(id) {
 return livros.findIndex(livro => {
   return livro.id === Number(id);
 })
}
```

- Adicione uma nova rota com o método GET e o caminho `/livros/:id`;
- Dentro da função de callback da rota `/livros/:id`, chame a função `buscaLivro` passando o valor do parâmetro `id` como argumento;
- Envie uma resposta com o status 200 e o conteúdo em formato JSON do livro encontrado no array `livros` usando o índice retornado pela função `buscaLivro`.

```js
app.get("/livros/:id", (req, res) => {
 const index = buscaLivro(req.params.id);
 res.status(200).json(livros[index]);
});
```

- Adicione uma nova rota com o método POST e o caminho `/livros`;
- Dentro da função de callback da rota `/livros`, adicione o corpo da requisição (livro) ao array `livros` com o método `push`;
- Envie uma resposta com o status 201 e o conteúdo "livro cadastrado com sucesso".

```js
app.post("/livros", (req, res) => {
 livros.push(req.body);
 res.status(201).send("livro cadastrado com sucesso");
});
```

- Adicione uma nova rota com o método PUT e o caminho `/livros/:id`;
- Dentro da função de callback da rota `/livros/:id`, chame a função `buscaLivro` passando o valor do parâmetro `id` como argumento;
- Atualize o título do livro encontrado usando o corpo da requisição (`req.body.titulo`);
- Envie uma resposta com o status 200 e o conteúdo em formato JSON do array `livros` atualizado.

```js
app.put("/livros/:id", (req, res) => {
 const index = buscaLivro(req.params.id);
 livros[index].titulo = req.body.titulo;
 res.status(200).json(livros);
})
```